<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pracheen Vigyaan</title>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #28a745;
            --secondary-color: #333333;
            --accent-color: #28a745;
            --background-color: #f0f4f8;
            --card-background: #ffffff;
            --text-color: #333333;
            --shadow-light: 0 4px 12px rgba(0, 0, 0, 0.08);
            --border-radius: 12px;
            --transition-speed: 0.3s;

            /* New Card Colors */
            --color-blue: #007bff;
            --color-purple: #6f42c1;
            --color-orange: #fd7e14;
            --color-teal: #20c997;
            --color-red: #dc3545;
            --color-indigo: #6610f2;

            /* Live Class Button Colors */
            --live-btn-color: #28a745;
            --rec-btn-color: #6c757d;
            
            /* Gemini Chat Colors */
            --gemini-chat-bg: #f8f9fa;
        }

        body.dark-mode {
            --background-color: #121212;
            --card-background: #1e1e1e;
            --text-color: #e0e0e0;
            --shadow-light: 0 4px 12px rgba(255, 255, 255, 0.05);
            --primary-color: #4caf50;
            --secondary-color: #e0e0e0;
            --accent-color: #4caf50;

            /* Dark Mode Card Colors */
            --color-blue: #0056b3;
            --color-purple: #563d7c;
            --color-orange: #c85d00;
            --color-teal: #148f6c;
            --color-red: #a71d2a;
            --color-indigo: #4e0d9b;

            /* Live Class Button Colors Dark Mode */
            --live-btn-color: #388e3c;
            --rec-btn-color: #555c63;

            /* Gemini Chat Colors Dark Mode */
            --gemini-chat-bg: #1e1e1e;
        }

        body {
            font-family: 'Poppins', sans-serif;
            margin: 0;
            background-color: var(--background-color);
            color: var(--text-color);
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            transition: background-color var(--transition-speed), color var(--transition-speed);
        }

        .container {
            position: relative;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            transition: transform var(--transition-speed) ease-in-out;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }
        
        /* Sidebar Menu */
        .sidebar {
            position: fixed;
            top: 0;
            left: -280px;
            width: 250px;
            height: 100%;
            background-color: var(--secondary-color);
            color: #fff;
            padding: 20px;
            box-shadow: 2px 0 10px rgba(0, 0, 0, 0.3);
            transition: left var(--transition-speed) ease-in-out;
            z-index: 1000;
        }
        .sidebar.active { left: 0; }
        .sidebar a {
            display: flex;
            align-items: center;
            padding: 15px;
            margin-bottom: 10px;
            color: #fff;
            text-decoration: none;
            border-radius: var(--border-radius);
            transition: background-color var(--transition-speed);
        }
        .sidebar a:hover { background-color: rgba(255, 255, 255, 0.1); }
        .sidebar a .material-icons { margin-right: 15px; }
        .close-btn {
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 2em;
            color: #fff;
            cursor: pointer;
        }
        body.dark-mode .sidebar {
            background-color: #2a2a2a;
        }
        body.dark-mode .sidebar a {
            color: #fff;
        }

        /* Topbar */
        .topbar {
            position: fixed; /* Fixed position */
            top: 0;
            left: 0;
            width: 100%;
            background-color: var(--card-background);
            color: var(--text-color);
            padding: 15px 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: var(--shadow-light);
            z-index: 50;
            box-sizing: border-box; /* Ensures padding is included in the width */
        }
        .topbar-left, .topbar-right {
            display: flex;
            align-items: center;
        }
        .topbar .material-icons {
            font-size: 2.2em;
            cursor: pointer;
            margin-right: 15px;
            color: var(--primary-color);
        }
        .topbar h1 {
            margin: 0;
            font-size: 1.5em;
            font-weight: 600;
        }
        .topbar .logo {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin-right: 10px;
            object-fit: cover;
        }

        /* Notification Icon with Dot */
        .notification-icon-container {
            position: relative;
            cursor: pointer;
            margin-right: 15px;
        }
        .notification-icon-container .material-icons {
            font-size: 2.2em;
            color: var(--primary-color);
        }
        .notification-dot {
            position: absolute;
            top: 2px;
            right: 12px;
            width: 10px;
            height: 10px;
            background-color: #dc3545;
            border-radius: 50%;
            display: none;
        }

        /* Main Content Area */
        .main-content {
            padding: 20px;
            flex-grow: 1;
            overflow-y: auto;
            position: relative;
            padding-bottom: 80px; /* Add padding for the bottom nav */
            padding-top: 80px; /* Add padding for the fixed topbar */
        }
        .page {
            display: none;
            animation: fadeIn 0.5s ease-in-out;
        }
        .page.active { display: block; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Card and Grid Styles */
        .card-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        .card {
            background-color: var(--card-background);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-light);
            padding: 20px;
            text-align: center;
            transition: transform var(--transition-speed), box-shadow var(--transition-speed);
            cursor: pointer;
            position: relative;
            overflow: hidden;
            border: 1px solid #e0e0e0;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
        }
        .card .material-icons {
            font-size: 3em;
            color: var(--primary-color);
            transition: color var(--transition-speed);
        }
        .card:hover .material-icons {
            color: var(--accent-color);
        }
        .card h3 {
            margin: 10px 0 0;
            font-size: 1.1em;
            font-weight: 500;
        }
        body.dark-mode .card {
            border-color: #333333;
        }

        /* Homepage Card Colors */
        .card-blue { border-left: 5px solid var(--color-blue); }
        .card-blue .material-icons { color: var(--color-blue); }
        .card-purple { border-left: 5px solid var(--color-purple); }
        .card-purple .material-icons { color: var(--color-purple); }
        .card-orange { border-left: 5px solid var(--color-orange); }
        .card-orange .material-icons { color: var(--color-orange); }
        .card-teal { border-left: 5px solid var(--color-teal); }
        .card-teal .material-icons { color: var(--color-teal); }
        .card-red { border-left: 5px solid var(--color-red); }
        .card-red .material-icons { color: var(--color-red); }
        .card-indigo { border-left: 5px solid var(--color-indigo); }
        .card-indigo .material-icons { color: var(--color-indigo); }

        .card-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-top: 20px;
        }
        .card-list .card {
            display: flex;
            align-items: center;
            justify-content: space-between;
            text-align: left;
            padding: 15px 20px;
        }
        .card-list .card p {
            font-size: 0.9em;
            color: #666;
            margin: 0;
        }

        /* Live Class Card Colors */
        .live-card {
            background-color: #e8f5e9;
            border-left: 5px solid #4caf50;
        }
        body.dark-mode .live-card {
            background-color: #2a2a2a;
            border-left: 5px solid #4caf50;
        }
        
        /* Live Class Buttons */
        .live-btn {
            background-color: var(--live-btn-color);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .live-btn:hover { background-color: #1e7e34; }
        .rec-btn {
            background-color: var(--rec-btn-color);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .rec-btn:hover { background-color: #5a6268; }

        /* Quiz/Test Styles */
        .submit-btn {
            display: block;
            width: 100%;
            padding: 15px;
            border: none;
            background-color: var(--accent-color);
            color: white;
            font-size: 1.1em;
            font-weight: 600;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: background-color var(--transition-speed);
        }
        .submit-btn:hover { background-color: #218838; }

        .result-section {
            margin-top: 30px;
            padding: 20px;
            background-color: #d4edda;
            border-radius: var(--border-radius);
            border: 2px solid var(--accent-color);
            text-align: center;
            display: none;
        }
        body.dark-mode .result-section {
            background-color: #1e1e1e;
            border-color: var(--accent-color);
            color: var(--text-color);
        }

        /* Bottom Nav */
        .bottom-nav {
            position: fixed; /* Changed from sticky to fixed */
            bottom: 0;
            left: 0;
            width: 100%;
            background-color: var(--card-background);
            box-shadow: 0 -4px 12px rgba(0, 0, 0, 0.08);
            display: flex;
            justify-content: space-around;
            padding: 10px 0;
            z-index: 50;
        }
        .bottom-nav a {
            display: flex;
            flex-direction: column;
            align-items: center;
            font-size: 0.8em;
            color: #888;
            text-decoration: none;
            transition: color var(--transition-speed);
        }
        .bottom-nav a.active { color: var(--primary-color); }
        .bottom-nav .material-icons { font-size: 1.8em; }
        body.dark-mode .bottom-nav {
            background-color: #1e1e1e;
        }
        body.dark-mode .bottom-nav a {
            color: #888;
        }

        .header-title {
            text-align: center;
            color: var(--secondary-color);
            margin: 20px 0;
            font-weight: 600;
        }
        .page-description {
            text-align: center;
            color: #666;
            margin-top: -10px;
            margin-bottom: 20px;
        }

        .back-button {
            position: absolute;
            top: 90px;
            left: 20px;
            background-color: transparent;
            border: none;
            color: var(--primary-color);
            font-size: 1.2em;
            cursor: pointer;
            z-index: 51;
        }
        
        .profile-menu {
            position: absolute;
            top: 60px;
            right: 20px;
            background-color: var(--card-background);
            border-radius: 8px;
            box-shadow: var(--shadow-light);
            padding: 10px;
            display: none;
            flex-direction: column;
            z-index: 100;
        }
        .profile-menu a {
            padding: 10px;
            text-decoration: none;
            color: var(--text-color);
            display: flex;
            align-items: center;
        }
        .profile-menu a:hover {
            background-color: #f0f0f0;
        }
        body.dark-mode .profile-menu {
            background-color: #2a2a2a;
        }
        body.dark-mode .profile-menu a:hover {
            background-color: #3a3a3a;
        }

        .youtube-player iframe {
            width: 100%;
            height: 250px;
            border-radius: var(--border-radius);
            margin-bottom: 20px;
        }
        @media (min-width: 768px) {
            .youtube-player iframe {
                height: 400px;
            }
        }

        .question-card, .doubt-form, .login-form-container {
            background-color: var(--card-background);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-light);
            padding: 20px;
            margin-bottom: 15px;
            border: 1px solid #e0e0e0;
        }
        body.dark-mode .question-card, body.dark-mode .doubt-form, body.dark-mode .login-form-container {
            background-color: #1e1e1e;
            border-color: #333;
        }
        .question-card p, .doubt-form p, .doubt-form label {
            margin: 0;
            padding-bottom: 5px;
        }
        .login-form-container input, .login-form-container select, .doubt-form input, .doubt-form select, .doubt-form textarea {
            width: 100%;
            padding: 10px;
            margin-bottom: 15px;
            border-radius: 8px;
            border: 1px solid #ccc;
            background-color: var(--background-color);
            color: var(--text-color);
            resize: vertical;
        }
        .login-form-container h2 {
            text-align: center;
        }
        .login-form-container p {
            text-align: center;
            font-size: 0.9em;
            color: #666;
        }
        .login-form-container .submit-btn {
            margin-top: 10px;
        }
        
        .test-container h4 {
            margin-top: 0;
            font-weight: 500;
        }
        .options label {
            display: block;
            margin-bottom: 10px;
            cursor: pointer;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 8px;
            transition: background-color 0.2s;
        }
        .options label:hover {
            background-color: #f0f0f0;
        }
        body.dark-mode .options label {
            border-color: #444;
            color: var(--text-color);
        }
        body.dark-mode .options label:hover {
            background-color: #3a3a3a;
        }
        .options input[type="radio"] {
            margin-right: 10px;
        }
        
        .answer-box {
            width: 100%;
            padding: 10px;
            border-radius: 8px;
            border: 1px solid #ccc;
            background-color: var(--background-color);
            color: var(--text-color);
            resize: vertical;
        }
        body.dark-mode .answer-box {
            background-color: #2a2a2a;
            border-color: #444;
            color: #e0e0e0;
        }
        
        .announcement-card {
            background-color: var(--card-background);
            border-left: 5px solid var(--primary-color);
            padding: 20px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-light);
            margin-bottom: 20px;
        }
        body.dark-mode .announcement-card {
            background-color: #1e1e1e;
        }

        .settings-section {
            background-color: var(--card-background);
            padding: 20px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-light);
            margin-bottom: 20px;
        }
        body.dark-mode .settings-section {
            background-color: #1e1e1e;
        }

        .settings-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #eee;
        }
        body.dark-mode .settings-item {
            border-color: #333;
        }
        
        .student-profile {
            background-color: var(--background-color);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            margin-bottom: 20px;
            border: 1px solid #ccc;
        }
        body.dark-mode .student-profile {
            background-color: #2a2a2a;
            border-color: #444;
        }
        .student-profile .profile-pic {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background-color: #eee;
            margin: 0 auto 10px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .student-profile .profile-pic .material-icons {
            font-size: 4em;
            color: #aaa;
        }
        .student-profile h3 {
            margin: 0;
        }
        .student-profile p {
            margin: 5px 0 0;
            font-size: 0.9em;
            color: #666;
        }
        
        .progress-bar-container {
            width: 100%;
            background-color: #e0e0e0;
            border-radius: 10px;
            margin-top: 10px;
        }
        .progress-bar {
            height: 10px;
            background-color: var(--primary-color);
            border-radius: 10px;
            width: 0%;
            transition: width 0.5s ease-in-out;
        }
        .progress-text {
            text-align: right;
            font-size: 0.8em;
            color: var(--text-color);
            margin-top: 5px;
        }
        
        .download-btn-wrapper {
            display: flex;
            gap: 10px;
            margin-top: 10px;
            justify-content: flex-end;
        }
        .download-btn {
            background-color: var(--color-blue);
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .download-btn:hover { background-color: #0056b3; }
        
        .toast {
            position: fixed;
            bottom: 80px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #333;
            color: white;
            padding: 15px 20px;
            border-radius: 10px;
            font-size: 1em;
            z-index: 1001;
            display: none;
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
        }
        .toast.show {
            display: block;
            opacity: 1;
        }

        /* Doubt Section CSS */
        .doubt-response-card {
            background-color: var(--card-background);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-light);
            padding: 20px;
            margin-top: 20px;
            border-left: 5px solid var(--accent-color);
        }
        body.dark-mode .doubt-response-card {
            background-color: #1e1e1e;
        }
        #ai-response-text {
            font-style: italic;
            color: #555;
            white-space: pre-wrap;
            font-family: 'Courier New', Courier, monospace;
        }
        body.dark-mode #ai-response-text {
            color: #aaa;
        }

        /* Gemini Floating Action Button (FAB) */
        .fab-gemini {
            position: fixed;
            bottom: 80px;
            right: 20px;
            width: 60px;
            height: 60px;
            background-color: #388e3c;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            cursor: pointer;
            z-index: 99;
            transition: transform 0.2s ease-in-out;
        }
        .fab-gemini:hover {
            transform: scale(1.05);
        }
        .fab-gemini .gemini-icon {
            font-size: 30px;
            color: white;
            filter: drop-shadow(0 1px 1px rgba(0,0,0,0.2));
            /* A special effect for the icon */
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        /* Gemini Chat Window */
        .gemini-chat-window {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: var(--gemini-chat-bg);
            z-index: 100;
            display: none;
            flex-direction: column;
            transition: all 0.3s ease-in-out;
            transform: translateY(100%);
            border: none; /* No border for the main window */
        }
        .gemini-chat-window.open {
            display: flex;
            transform: translateY(0);
        }
        .chat-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 15px 20px;
            background-color: var(--card-background);
            box-shadow: var(--shadow-light);
            border-bottom: 1px solid #ccc;
        }
        body.dark-mode .chat-header {
            border-color: #333;
        }
        .chat-header .material-icons {
            font-size: 1.8em;
            cursor: pointer;
            color: var(--primary-color);
        }
        .chat-header h3 {
            margin: 0;
            font-weight: 600;
        }
        
        /* Loading spinner for doubt form */
        .loading-spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            border-left-color: var(--primary-color);
            animation: spin 1s ease infinite;
            margin: 20px auto;
            display: none;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Container to hide Jotform branding and banner */
        .jotform-iframe-container {
            flex-grow: 1;
            width: 100%;
            overflow: hidden; /* This hides anything that overflows */
            position: relative;
        }
        .jotform-iframe {
            width: 100%;
            height: 115%; /* Make the iframe taller to push branding out of view */
            border: none;
            position: absolute;
            top: -65px; /* Adjust this value to hide the top banner */
            left: 0;
        }

        /* Batch Cards CSS */
        .batch-card {
            background-color: var(--card-background);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-light);
            overflow: hidden;
            margin-bottom: 20px;
            cursor: pointer;
            transition: transform var(--transition-speed);
        }
        .batch-card:hover {
            transform: translateY(-5px);
        }
        .batch-card .batch-image {
            width: 100%;
            height: auto;
            display: block;
            border-top-left-radius: var(--border-radius);
            border-top-right-radius: var(--border-radius);
            object-fit: cover;
            aspect-ratio: 16 / 9;
        }
        .batch-card-content {
            padding: 15px;
            display: flex;
            flex-direction: column;
        }
        .batch-card-content h3 {
            margin: 0 0 10px 0;
            font-size: 1.2em;
        }
        .batch-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .batch-info p {
            margin: 0;
            font-size: 1em;
            font-weight: 600;
        }
        .batch-price {
            color: var(--primary-color);
        }
        .batch-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 15px;
        }
        .batch-actions .explore-btn {
            background-color: transparent;
            color: var(--color-blue);
            border: 1px solid var(--color-blue);
            padding: 8px 15px;
            border-radius: 8px;
            font-size: 0.9em;
            cursor: pointer;
            transition: background-color 0.2s, color 0.2s;
        }
        .batch-actions .explore-btn:hover {
            background-color: var(--color-blue);
            color: white;
        }
        .batch-actions .buy-btn {
            background-color: var(--color-blue);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 8px;
            font-size: 0.9em;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .batch-actions .buy-btn:hover {
            background-color: #0056b3;
        }

 /* New Styles for comments/chat */
.comment-chat-window {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: var(--gemini-chat-bg);
    z-index: 101;
    display: none;
    flex-direction: column;
    transition: all 0.3s ease-in-out;
    transform: translateY(100%);
    border: none;
}

.comment-chat-window.open {
    display: flex;
    transform: translateY(0);
}

.comment-chat-window .chat-header {
    background-color: var(--card-background);
    border-bottom: 1px solid #ccc;
    padding: 15px 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    box-shadow: var(--shadow-light);
}

.comment-chat-window .chat-header .material-icons {
    font-size: 1.8em;
    cursor: pointer;
    color: var(--primary-color);
}

.comment-chat-window .chat-messages {
    flex-grow: 1;
    padding: 20px;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
}

.comment-chat-window .chat-input-container {
    padding: 15px 20px;
    background-color: var(--card-background);
    border-top: 1px solid #ccc;
    display: flex;
    gap: 10px;
}

.comment-chat-window .chat-input-container input {
    flex-grow: 1;
    border-radius: 25px;
    border: 1px solid #ccc;
    padding: 10px 15px;
    outline: none;
}

.comment-chat-window .chat-input-container button {
    background-color: var(--primary-color);
    color: white;
    border: none;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
}

.chat-message {
    background-color: #e0e0e0;
    border-radius: 12px;
    padding: 10px 15px;
    margin-bottom: 10px;
    max-width: 80%;
    word-wrap: break-word;
}

.chat-message.self {
    background-color: #dcf8c6;
    margin-left: auto;
}

.chat-message .meta {
    font-size: 0.7em;
    color: #888;
    text-align: right;
    margin-top: 5px;
}

/* Floating Action Button */
.fab-gemini {
    position: fixed;
    bottom: 80px;
    right: 20px;
    width: 60px;
    height: 60px;
    background-color: #388e3c;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
    cursor: pointer;
    z-index: 99;
    transition: transform 0.2s ease-in-out;
}

.fab-gemini:hover {
    transform: scale(1.05);
}

.fab-gemini .gemini-icon {
    font-size: 30px;
    color: white;
    filter: drop-shadow(0 1px 1px rgba(0, 0, 0, 0.2));
    animation: pulse 2s infinite;
}

@keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.1); }
    100% { transform: scale(1); }
}

/* Dark mode adjustments for chat section */
body.dark-mode .comment-chat-window .chat-header {
    border-color: #333;
}

body.dark-mode .comment-chat-window .chat-input-container {
    border-color: #333;
}

body.dark-mode .comment-chat-window .chat-input-container input {
    background-color: #2a2a2a;
    border-color: #444;
    color: #e0e0e0;
}

        /* Batch Details Pop-up */
        .batch-details-popup {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        .popup-content {
            background-color: var(--card-background);
            padding: 20px;
            border-radius: var(--border-radius);
            max-width: 90%;
            max-height: 90%;
            overflow-y: auto;
            position: relative;
        }
        .popup-close {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 2em;
            color: #555;
            cursor: pointer;
        }
        .popup-content h3 {
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 10px;
            margin-top: 0;
        }
        .popup-content ul {
            list-style-type: none;
            padding: 0;
        }
        .popup-content li {
            padding: 5px 0;
        }

        /* Pop-up for home screen */
        .welcome-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: var(--card-background);
            padding: 25px;
            border-radius: var(--border-radius);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            z-index: 1002;
            text-align: center;
            display: none;
        }
        .welcome-popup h3 {
            color: var(--primary-color);
            margin: 0 0 10px 0;
        }
        .welcome-popup p {
            margin: 0;
        }
        .welcome-popup .close-popup-btn {
            background-color: var(--color-red);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 8px;
            margin-top: 15px;
            cursor: pointer;
        }
        body.dark-mode .welcome-popup {
            background-color: #2a2a2a;
        }
    </style>
</head>
<body>

    <div id="login-page" class="page active">
        <div class="main-content" style="display: flex; align-items: center; justify-content: center; min-height: 100vh;">
            <div class="login-form-container">
                <img src="https://res.cloudinary.com/dratpppk4/image/upload/v1755767330/IMG_20250821_143541_wpqchr.png" alt="Logo" style="display: block; margin: 0 auto 20px; max-width: 150px;">
                <h2 class="header-title" style="margin-top: 0;">Welcome!</h2>
                <p>Please enter your details to continue.</p>
                <form id="login-form">
                    <input type="text" id="login-name" placeholder="Your Name" required>
                    <input type="tel" id="login-mobile" placeholder="Mobile Number" required>
                    <select id="login-class" required>
                        <option value="">Select Your Class</option>
                        <option value="6th">6th</option>
                        <option value="7th">7th</option>
                        <option value="8th">8th</option>
                        <option value="9th">9th</option>
                        <option value="10th">10th</option>
                        <option value="11th JEE">11th JEE</option>
                        <option value="12th JEE">12th JEE</option>
                        <option value="11th NEET">11th NEET</option>
                        <option value="12th NEET">12th NEET</option>
                    </select>
                    <button type="submit" class="submit-btn">Continue</button>
                </form>
            </div>
        </div>
    </div>

    <div id="main-app-container" style="display: none;">
        <div class="container">
            <div id="mySidebar" class="sidebar">
                <span class="material-icons close-btn" onclick="toggleNav()">close</span>
                <a href="#" onclick="showPage('home-page'); toggleNav();"><span class="material-icons">home</span> Home</a>
                <a href="#" onclick="showPage('my-courses-page'); toggleNav();"><span class="material-icons">group</span> My Courses</a>
                <a href="#" onclick="showPage('all-classes-page'); toggleNav();"><span class="material-icons">school</span> All Classes</a>
                <a href="#" onclick="showPage('tests-page'); toggleNav();"><span class="material-icons">assignment</span> Tests & Quizzes</a>
                <a href="#" onclick="showPage('downloads-page'); toggleNav();"><span class="material-icons">cloud_download</span> Downloads</a>
                <a href="#" onclick="showPage('doubt-page'); toggleNav();"><span class="material-icons">help_outline</span> Ask a Doubt</a>
                <a onclick="showAllUsers()">
        <span class="material-icons">people_alt</span>
        <span class="nav-text">All User Data</span>
    </a>
                <a href="https://t.me/PracheenVigyaan"><span class="material-icons">send</span> Telegram Channel</a>
                <a href="https://api.whatsapp.com/send?phone=7017811269"><span class="material-icons">chat</span> WhatsApp Support</a>
                <a href="" onclick="showPage('settings-page'); toggleNav();"><span class="material-icons">settings</span> Settings</a>
            </div>

            <div class="topbar">
                <div class="topbar-left">
                    <span class="material-icons" onclick="toggleNav()">menu</span>
                    <img src="https://res.cloudinary.com/dratpppk4/image/upload/v1755767330/IMG_20250821_143541_wpqchr.png" alt="Logo" class="logo">
                    <h1>Pracheen Vigyaan</h1>
                </div>
                <div class="topbar-right">
                    <div class="notification-icon-container" onclick="showPage('notifications-page')">
                        <span class="material-icons">notifications</span>
                        <span class="notification-dot" id="notification-dot"></span>
                    </div>
                    <span class="material-icons" onclick="toggleProfileMenu()">account_circle</span>
                    <div id="profile-menu" class="profile-menu">
                        <a href="#" onclick="showPage('settings-page'); toggleProfileMenu();"><span class="material-icons">settings</span> Settings</a>
                        <a href="#" onclick="showPage('notifications-page'); toggleProfileMenu();"><span class="material-icons">notifications</span> Notifications</a>
                        <a href="" onclick="logoutUser()"><span class="material-icons">logout</span> Logout</a>
                    </div>
                </div>
            </div>

            <div class="main-content">
                <div id="home-page" class="page">
                    <h2 class="header-title">Pracheen Vigyaan</h2>
                    <p class="page-description">Discover ancient wisdom through modern education.</p>
                    
                    <h3 style="font-weight: 600; margin-bottom: 10px;">Upcoming Live Classes</h3>
                    <div class="card-list" style="margin-top: 0;">
                        <div class="card live-card">
                            <div style="width: 100%;">
                                <div style="display: flex; align-items: center; justify-content: space-between;">
                                    <h3>🔴 10th Science - Light</h3>
                                    <div style="display: flex; flex-direction: column; align-items: flex-end;">
                                        <p>Tomorrow, 5:00 PM</p>
                                        <p style="font-size: 0.8em; color: var(--primary-color);">Teacher: Vikrant Sir</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="card live-card">
                            <div style="width: 100%;">
                                <div style="display: flex; align-items: center; justify-content: space-between;">
                                    <h3>🔴 11th JEE Physics - Kinematics</h3>
                                    <div style="display: flex; flex-direction: column; align-items: flex-end;">
                                        <p>Today, 7:00 PM</p>
                                        <p style="font-size: 0.8em; color: var(--primary-color);">Teacher: Alok Sir</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card-grid">
                        <div class="card card-blue" onclick="showPage('all-classes-page')">
                            <span class="material-icons">school</span>
                            <h3>All Classes</h3>
                        </div>
                        <div class="card card-purple" onclick="showPage('my-courses-page')">
                            <span class="material-icons">group</span>
                            <h3>My Courses</h3>
                        </div>
                        <div class="card card-orange" onclick="showPage('offline-class-page')">
                            <span class="material-icons">apartment</span>
                            <h3>Offline Centers</h3>
                        </div>
                        <div class="card card-teal" onclick="showPage('announcements-page')">
                            <span class="material-icons">campaign</span>
                            <h3>Announcements</h3>
                        </div>
                        <div class="card card-red" onclick="showPage('tests-page')">
                            <span class="material-icons">assignment</span>
                            <h3>Tests & Quizzes</h3>
                        </div>
                        <div class="card card-indigo" onclick="showPage('doubt-page')">
                            <span class="material-icons">help_outline</span>
                            <h3>Ask a Doubt</h3>
                        </div>
                        <div class="card card-blue" onclick="showPage('downloads-page')">
                            <span class="material-icons">cloud_download</span>
                            <h3>Downloads</h3>
                        </div>
                        <div class="card card-purple" onclick="showPage('settings-page')">
                            <span class="material-icons">settings</span>
                            <h3>Settings</h3>
                        </div>
                        <div class="card card-green" onclick="showPage('pv-batches-page')">
                            <span class="material-icons">collections_bookmark</span>
                            <h3>PV Batches</h3>
                        </div>
                    </div>
                </div>
                
                <div id="pv-batches-page" class="page">
                    <button class="back-button" onclick="goBack()"><span class="material-icons">arrow_back</span></button>
                    <h2 class="header-title">PV Batches</h2>
                    <div id="batches-list">
                        </div>
                </div>

                <div id="batch-details-popup" class="batch-details-popup">
                    <div class="popup-content">
                        <span class="material-icons popup-close" onclick="closePopup('batch-details-popup')">close</span>
                        <h3 id="batch-details-title"></h3>
                        <p id="batch-details-description"></p>
                        <h4>Key Features:</h4>
                        <ul id="batch-details-features"></ul>
                    </div>
                </div>

                <                <<div id="all-classes-page" class="page">
    <button class="back-button" onclick="goBack()"><span class="material-icons">arrow_back</span></button>
    <h2 class="header-title">All Classes</h2>
    <div class="card-list">
        <div class="card live-card" onclick="showPage('live-classes-page')">
            <h3>Live Classes</h3>
            <span class="material-icons">arrow_forward_ios</span>
        </div>
        <div class="card" onclick="showClassInfoPage('6th')">
            <h3>6th</h3>
            <span class="material-icons">arrow_forward_ios</span>
        </div>
        <div class="card" onclick="showClassInfoPage('7th')">
            <h3>7th</h3>
            <span class="material-icons">arrow_forward_ios</span>
        </div>
        <div class="card" onclick="showClassInfoPage('8th')">
            <h3>8th</h3>
            <span class="material-icons">arrow_forward_ios</span>
        </div>
        <div class="card" onclick="showClassInfoPage('9th')">
            <h3>9th</h3>
            <span class="material-icons">arrow_forward_ios</span>
        </div>
        <div class="card" onclick="showClassInfoPage('10th')">
            <h3>10th</h3>
            <span class="material-icons">arrow_forward_ios</span>
        </div>
        <div class="card" onclick="showClassInfoPage('11th JEE')">
            <h3>11th JEE</h3>
            <span class="material-icons">arrow_forward_ios</span>
        </div>
        <div class="card" onclick="showClassInfoPage('12th JEE')">
            <h3>12th JEE</h3>
            <span class="material-icons">arrow_forward_ios</span>
        </div>
        <div class="card" onclick="showClassInfoPage('11th NEET')">
            <h3>11th NEET</h3>
            <span class="material-icons">arrow_forward_ios</span>
        </div>
        <div class="card" onclick="showClassInfoPage('12th NEET')">
            <h3>12th NEET</h3>
            <span class="material-icons">arrow_forward_ios</span>
        </div>
    </div>
</div>

<div id="class-info-page" class="page">
    <button class="back-button" onclick="goBack()"><span class="material-icons">arrow_back</span></button>
    <h2 id="class-info-title" class="header-title"></h2>
    <div class="banner">
        <img id="banner-image" src="" alt="Class Banner" style="width: 100%; height: auto; border-radius: 10px;"/>
        <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 10px;">
            <p style="font-weight: bold;">Explore: <span id="explore-text" onclick="showBatchDetailsForClass(currentClass)" style="color: var(--primary-color); text-decoration: underline; cursor: pointer;"></span></p>
            <p id="batch-price" style="color: green; font-weight: bold;"></p>
            <button style="background-color: red; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer;" onclick="window.open('https://api.whatsapp.com/send?phone=7017811269', '_blank')">Buy now</button>
        </div>
    </div>
    <div style="text-align: center; margin-top: 20px;">
        <p style="font-weight: bold;">Firstly buy batch and enter uniqe code</p>
        <div style="display: flex; justify-content: center; align-items: center; gap: 10px; margin-top: 10px;">
            <input type="text" id="unique-code-input" placeholder="Enter Unique Code" style="padding: 10px; border: 1px solid #ccc; border-radius: 5px;"/>
            <button style="background-color: var(--primary-color); color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer;" onclick="verifyCode()">Submit</button>
        </div>
        <p id="error-message" style="color: red; margin-top: 10px; display: none;">Invalid code. Please try again.</p>
    </div>
</div>

 <div id="live-classes-page" class="page">
                    <button class="back-button" onclick="goBack()"><span class="material-icons">arrow_back</span></button>
                    <h2 class="header-title">Live Classes</h2>
                    <div class="card-list">
                        <div class="card">
                            <h3>Live 🔴 6th Science</h3>
                            <div>
                                <button class="live-btn" onclick="window.open('https://youtube.com/live/#lagakar', '_blank')">Join Live</button>
                                <button class="rec-btn" style="margin-top: 10px;" onclick="window.open('https://youtube.com/watch?v=#lagakar', '_blank')">Recording</button>
                            </div>
                        </div>
                        <div class="card">
                            <h3>Live 🔴 7th Maths</h3>
                            <div>
                                <button class="live-btn" onclick="window.open('https://youtube.com/live/#lagakar', '_blank')">Join Live</button>
                                <button class="rec-btn" style="margin-top: 10px;" onclick="window.open('https://youtube.com/watch?v=#lagakar', '_blank')">Recording</button>
                            </div>
                        </div>
                        <div class="card">
                            <h3>Live 🔴 8th Science</h3>
                            <div>
                                <button class="live-btn" onclick="window.open('https://youtube.com/live/#lagakar', '_blank')">Join Live</button>
                                <button class="rec-btn" style="margin-top: 10px;" onclick="window.open('https://youtube.com/watch?v=#lagakar', '_blank')">Recording</button>
                            </div>
                        </div>
                        <div class="card">
                            <h3>Live 🔴 9th Physics</h3>
                            <div>
                                <button class="live-btn" onclick="window.open('https://youtube.com/live/#lagakar', '_blank')">Join Live</button>
                                <button class="rec-btn" style="margin-top: 10px;" onclick="window.open('https://youtube.com/watch?v=#lagakar', '_blank')">Recording</button>
                            </div>
                        </div>
                        <div class="card">
                            <h3>Live 🔴 10th Maths</h3>
                            <div>
                                <button class="live-btn" onclick="window.open('https://youtube.com/live/#lagakar', '_blank')">Join Live</button>
                                <button class="rec-btn" style="margin-top: 10px;" onclick="window.open('https://youtube.com/watch?v=#lagakar', '_blank')">Recording</button>
                            </div>
                        </div>
                        <div class="card">
                            <h3>Live 🔴 11th JEE Physics</h3>
                            <div>
                                <button class="live-btn" onclick="window.open('https://youtube.com/live/#lagakar', '_blank')">Join Live</button>
                                <button class="rec-btn" style="margin-top: 10px;" onclick="window.open('https://youtube.com/watch?v=#lagakar', '_blank')">Recording</button>
                            </div>
                        </div>
                        <div class="card">
                            <h3>Live 🔴 12th JEE Chemistry</h3>
                            <div>
                                <button class="live-btn" onclick="window.open('https://youtube.com/live/#lagakar', '_blank')">Join Live</button>
                                <button class="rec-btn" style="margin-top: 10px;" onclick="window.open('https://youtube.com/watch?v=#lagakar', '_blank')">Recording</button>
                            </div>
                        </div>
                         <div class="card">
                            <h3>Live 🔴 11th NEET Biology</h3>
                            <div>
                                <button class="live-btn" onclick="window.open('https://youtube.com/live/#lagakar', '_blank')">Join Live</button>
                                <button class="rec-btn" style="margin-top: 10px;" onclick="window.open('https://youtube.com/watch?v=#lagakar', '_blank')">Recording</button>
                            </div>
                        </div>
                         <div class="card">
                            <h3>Live 🔴 12th NEET Physics</h3>
                            <div>
                                <button class="live-btn" onclick="window.open('https://youtube.com/live/#lagakar', '_blank')">Join Live</button>
                                <button class="rec-btn" style="margin-top: 10px;" onclick="window.open('https://youtube.com/watch?v=#lagakar', '_blank')">Recording</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="class-subjects-page" class="page">
                    <button class="back-button" onclick="goBack()"><span class="material-icons">arrow_back</span></button>
                    <h2 id="class-subjects-title" class="header-title"></h2>
                    <div class="card-list" id="class-subjects-list">
                        </div>
                </div>

                <div id="subject-chapters-page" class="page">
                    <button class="back-button" onclick="goBack()"><span class="material-icons">arrow_back</span></button>
                    <h2 id="subject-chapters-title" class="header-title"></h2>
                    <div class="card-list" id="subject-chapters-list">
                        </div>
                </div>

                <div id="chapter-content-page" class="page">
                    <button class="back-button" onclick="goBack()"><span class="material-icons">arrow_back</span></button>
                    <h2 id="chapter-content-title" class="header-title"></h2>
                    <div class="card-grid">
                        <div class="card" onclick="showPage('lectures-page')">
                            <span class="material-icons">play_circle_outline</span>
                            <h3>Lectures</h3>
                        </div>
                        <div class="card" onclick="showPage('questions-menu-page')">
                            <span class="material-icons">assignment</span>
                            <h3>Questions</h3>
                        </div>
                        <div class="card" onclick="showPage('chapter-downloads-page')">
                            <span class="material-icons">cloud_download</span>
                            <h3>Notes & DPPs</h3>
                        </div>
                    </div>
                    <div class="settings-section" style="margin-top: 20px;">
                        <h3>Your Progress</h3>
                        <div class="progress-bar-container">
                            <div id="progress-bar" class="progress-bar"></div>
                        </div>
                        <p id="progress-text" class="progress-text">0% Complete</p>
                    </div>
                </div>

                <div id="lectures-page" class="page">
                    <button class="back-button" onclick="goBack()"><span class="material-icons">arrow_back</span></button>
                    <h2 id="lectures-title" class="header-title"></h2>
                    <div class="youtube-player" id="video-player">
                        <iframe src="https://www.youtube.com/embed/#lagakar" frameborder="0" allowfullscreen></iframe>
                    </div>
                    <div class="card-list" id="lectures-list">
                        </div>
                </div>
                
                <div id="questions-menu-page" class="page">
                    <button class="back-button" onclick="goBack()"><span class="material-icons">arrow_back</span></button>
                    <h2 id="questions-title" class="header-title"></h2>
                    <div class="card-list">
                        <div class="card" onclick="showPage('test-details-page', 'MCQ Test')">
                            <h3>Tests (MCQ)</h3>
                            <span class="material-icons">arrow_forward_ios</span>
                        </div>
                        <div class="card" onclick="showPage('subjective-questions-page', currentChapter)">
                            <h3>Subjective Questions</h3>
                            <span class="material-icons">arrow_forward_ios</span>
                        </div>
                    </div>
                </div>

                <div id="tests-page" class="page">
                    <button class="back-button" onclick="goBack()"><span class="material-icons">arrow_back</span></button>
                    <h2 class="header-title">Tests & Quizzes</h2>
                    <div class="card-list">
                        <div class="card" onclick="showPage('test-details-page', 'Weekly Maths Quiz - Class 10')">
                            <h3>Weekly Maths Quiz - Class 10</h3>
                            <p>Date: July 20, 2025 | Time: 4:00 PM</p>
                            <p>Topics: Chapter 1 & 2</p>
                            <button class="submit-btn" style="background-color: var(--primary-color); margin-top: 10px;">Start Test</button>
                        </div>
                        <div class="card" onclick="showPage('test-details-page', 'JEE Physics Mock Test - Kinematics')">
                            <h3>JEE Physics Mock Test - Kinematics</h3>
                            <p>Date: July 22, 2025 | Time: 6:00 PM</p>
                            <p>Topics: Kinematics</p>
                            <button class="submit-btn" style="background-color: var(--primary-color); margin-top: 10px;">Start Test</button>
                        </div>
                        <div class="card" onclick="showPage('test-details-page', 'JEE Physics Mock Test - Electrostatics')">
                            <h3>JEE Physics Mock Test - Electrostatics</h3>
                            <p>Date: July 22, 2025 | Time: 6:00 PM</p>
                            <p>Topics: Electrostatics</p>
                            <button class="submit-btn" style="background-color: var(--primary-color); margin-top: 10px;">Start Test</button>
                        </div>
                    </div>
                </div>

                <div id="test-details-page" class="page">
                    <button class="back-button" onclick="goBack()"><span class="material-icons">arrow_back</span></button>
                    <h2 id="test-details-title" class="header-title"></h2>
                    <div class="test-container">
                        <form id="quiz-form">
                            </form>
                        <div id="result-section" class="result-section">
                            <h2>Your Score: <span id="quiz-score"></span> / <span id="total-questions"></span></h2>
                            <p>Correct: <span id="correct-answers"></span></p>
                            <p>Incorrect: <span id="incorrect-answers"></span></p>
                        </div>
                    </div>
                </div>
                
                <div id="subjective-questions-page" class="page">
                    <button class="back-button" onclick="goBack()"><span class="material-icons">arrow_back</span></button>
                    <h2 id="subjective-questions-title" class="header-title"></h2>
                    <div class="card-list" id="subjective-questions-list">
                    </div>
                </div>

                <div id="announcements-page" class="page">
                    <button class="back-button" onclick="goBack()"><span class="material-icons">arrow_back</span></button>
                    <h2 class="header-title">Announcements</h2>
                    <div class="announcement-card">
                        <h3>New Batch Enrollment Open!</h3>
                        <p>Enroll for the upcoming academic year. Limited seats available! <a href="#">Click here for details.</a></p>
                    </div>
                    <div class="announcement-card">
                        <h3>Physics Live Class Rescheduled</h3>
                        <p>Class 10 Physics session for tomorrow (July 15, 2025) has been moved to 5:00 PM. Check your batch schedule!</p>
                    </div>
                    <div class="announcement-card">
                        <h3>Platform Update</h3>
                        <p>New "Tests & Quizzes" section now live! Test your knowledge!</p>
                    </div>
                </div>

                <div id="doubt-page" class="page">
                    <button class="back-button" onclick="goBack()"><span class="material-icons">arrow_back</span></button>
                    <h2 class="header-title">Ask a Doubt</h2>
                    <p style="text-align: center; color: #666; font-style: italic;">Submit your question to get an instant answer from our AI Tutor.</p>
                    <div class="test-container">
                        <form class="doubt-form" id="doubt-form">
                            <label for="doubt-subject-select">Subject:</label>
                            <select id="doubt-subject-select" required>
                                <option value="">Select Subject</option>
                                <option value="Physics">Physics</option>
                                <option value="Maths">Maths</option>
                                <option value="Chemistry">Chemistry</option>
                                <option value="Biology">Biology</option>
                                <option value="Other">Other</option>
                            </select>
                            <label for="doubt-text">Your Question:</label>
                            <textarea id="doubt-text" rows="5" placeholder="Type your doubt here..." required></textarea>
                            <button type="submit" class="submit-btn">Get AI Answer</button>
                        </form>
                        <div class="loading-spinner" id="doubt-loading-spinner"></div>
                    </div>
                </div>

                <div id="settings-page" class="page">
                    <button class="back-button" onclick="goBack()"><span class="material-icons">arrow_back</span></button>
                    <h2 class="header-title">Settings</h2>
                    <div class="settings-section">
                        <h3>App Settings</h3>
                        <div class="settings-item">
                            <span>Enable Notifications:</span>
                            <input type="checkbox" id="notifications-toggle" checked>
                        </div>
                        <div class="settings-item">
                            <span>Dark Mode:</span>
                            <input type="checkbox" id="dark-mode-toggle">
                        </div>
                        <button class="submit-btn" style="background-color: #dc3545; margin-top: 20px;" onclick="logoutUser()">Logout</button>
                    </div>
                    <div class="settings-section">
                        <h3>Student Profile</h3>
                        <div class="student-profile">
                            <div class="profile-pic"><span class="material-icons">account_circle</span></div>
                            <h3 id="student-name">Student Name</h3>
                            <p id="student-class">Class: 6th</p>
                        </div>
                    </div>
                    <div class="settings-section">
                        <h3>App Information</h3>
                        <p>Version: 1.7.0</p>
                        <p>Last Updated: August 2025</p>
                        <p><a href="#">Privacy Policy</a> | <a href="#">Terms of Service</a></p>
                    </div>
                </div>

                <div id="notifications-page" class="page">
                    <button class="back-button" onclick="goBack()"><span class="material-icons">arrow_back</span></button>
                    <h2 class="header-title">Notifications</h2>
                    <div id="notifications-list" class="card-list">
                        <div class="announcement-card">
                            <h3>New Live Class Scheduled!</h3>
                            <p>Class 10 Maths: 'Real Numbers' on August 22, 2025 at 5:00 PM. <a href="#">Join now!</a></p>
                        </div>
                        <div class="announcement-card">
                            <h3>Your Doubt Has Been Answered</h3>
                            <p>Your doubt on 'Rational Numbers' has been resolved by our expert. Check the Doubt section!</p>
                        </div>
                        <div class="announcement-card">
                            <h3>New Study Material Available</h3>
                            <p>Notes for 'Kinematics' (11th JEE Physics) are now available in the Downloads section.</p>
                        </div>
                    </div>
                </div>
                
                <div id="downloads-page" class="page">
                    <button class="back-button" onclick="goBack()"><span class="material-icons">arrow_back</span></button>
                    <h2 class="header-title">Downloads</h2>
                    <div class="card-list">
                        <div class="card">
                            <h3>PDF: Class 10 Maths - Real Numbers Notes</h3>
                            <button class="submit-btn" style="background-color: var(--color-blue);">Download</button>
                        </div>
                        <div class="card">
                            <h3>PDF: 11th JEE Physics - Kinematics DPP</h3>
                            <button class="submit-btn" style="background-color: var(--color-blue);">Download</button>
                        </div>
                        <div class="card">
                            <h3>PDF: Class 8 Science - Crop Production Notes</h3>
                            <button class="submit-btn" style="background-color: var(--color-blue);">Download</button>
                        </div>
                    </div>
                </div>
                
                <div id="chapter-downloads-page" class="page">
                    <button class="back-button" onclick="goBack()"><span class="material-icons">arrow_back</span></button>
                    <h2 id="chapter-downloads-title" class="header-title"></h2>
                    <div class="card-list" id="chapter-downloads-list">
                    </div>
                </div>
                
                <div id="my-courses-page" class="page">
                    <button class="back-button" onclick="goBack()"><span class="material-icons">arrow_back</span></button>
                    <h2 class="header-title">My Courses</h2>
                    <p style="text-align:center;">You are not enrolled in any course yet. Enroll in a class to see your courses here!</p>
                </div>
                
                <div id="offline-class-page" class="page">
                    <button class="back-button" onclick="goBack()"><span class="material-icons">arrow_back</span></button>
                    <h2 class="header-title">Offline Centers</h2>
                    <p style="text-align:center;">Information about our offline centers will be available here soon.</p>
                </div>
            </div>
        </div>
        
        <div class="bottom-nav">
            <a href="#" onclick="showPage('home-page')" class="active">
                <span class="material-icons">home</span>
                Home
            </a>
            <a href="#" onclick="showPage('tests-page')">
                <span class="material-icons">assignment</span>
                Tests
            </a>
            <a href="#" onclick="showPage('live-classes-page')">
                <span class="material-icons">live_tv</span>
                Live
            </a>
            <a href="#" onclick="showPage('doubt-page')">
                <span class="material-icons">help_outline</span>
                Doubt
            </a>
            <a href="#" onclick="showPage('settings-page')">
                <span class="material-icons">settings</span>
                Settings
            </a>
        </div>
        
        <div class="fab-gemini" id="fab-gemini" onclick="toggleGeminiChat()">
            <img src="https://res.cloudinary.com/dratpppk4/image/upload/v1755767330/IMG_20250821_143541_wpqchr.png" alt="Gemini Icon" class="gemini-icon" style="width: 30px; height: 30px;">
        </div>
        
        <div class="gemini-chat-window" id="gemini-chat-window">
            <div class="chat-header">
                <span class="material-icons" onclick="toggleGeminiChat()">arrow_back</span>
                <h3>AI Tutor</h3>
                <span></span>
            </div>
            <div class="jotform-iframe-container">
                <iframe src="https://agent.jotform.com/0198cb53aeec794bb502d2a6f31d4c8eab98" class="jotform-iframe"></iframe>
            </div>
        </div>
        
        <div id="all-users-page" class="page">
    <div class="header">
        <span class="material-icons back-btn" onclick="goBack()">arrow_back</span>
        <h2>All User Data</h2>
    </div>
    <div class="content" style="padding-top: 20px;">
        <div class="input-group">
            <input type="password" id="admin-code-input" placeholder="Enter Admin Code">
            <button class="submit-btn" onclick="verifyAdminCode()">Unlock</button>
        </div>
        <div id="all-users-list" class="card-container">
            </div>
    </div>
</div>
        
        <div class="fab-gemini" onclick="openCommentChat()">
    <span class="material-icons gemini-icon">chat</span>
</div>

<div id="comment-chat-window" class="comment-chat-window">
    <div class="chat-header">
        <span class="material-icons" onclick="closeCommentChat()">arrow_back</span>
        <h3>Community Chat</h3>
        <span class="material-icons" onclick="clearCommentChat()">delete_forever</span>
    </div>
    <div id="chat-messages" class="chat-messages">
        </div>
    <div class="chat-input-container">
        <input type="text" id="comment-input" placeholder="Type a message...">
        <button onclick="sendComment()"><span class="material-icons">send</span></button>
    </div>
</div>
        
        <div id="welcome-popup" class="welcome-popup">
            <h3 id="welcome-popup-title">Welcome to Pracheen Vigyaan!</h3>
            <p>Join our **9th-12th** ₹149 special Batches!</p>
            <button class="close-popup-btn" onclick="closePopup('welcome-popup')">Close</button>
        </div>

    </div>
    <div id="toast" class="toast"></div>

    <script>
        const classData = {
            '6th': ['Maths', 'Science', 'Social Science', 'Hindi', 'English'],
            '7th': ['Maths', 'Science', 'Social Science', 'Hindi', 'English'],
            '8th': ['Maths', 'Science', 'Social Science', 'Hindi', 'English'],
            '9th': ['Maths', 'Physics', 'Chemistry', 'Biology', 'Social Science', 'Hindi', 'English'],
            '10th': ['Maths', 'Physics', 'Chemistry', 'Biology', 'Social Science', 'Hindi', 'English'],
            '11th JEE': ['Physics', 'Chemistry', 'Maths'],
            '12th JEE': ['Physics', 'Chemistry', 'Maths'],
            '11th NEET': ['Physics', 'Chemistry', 'Biology'],
            '12th NEET': ['Physics', 'Chemistry', 'Biology']
        };

        const batchData = [
            {
                id: 'batch1',
                name: 'Class 10th Foundation Batch',
                image: 'https://res.cloudinary.com/dratpppk4/image/upload/v1756286460/InShot_20250827_143319347_qxkyua.jpg',
                price: '₹49/month',
                buyLink: 'https://api.whatsapp.com/send?phone=7017811269',
                description: 'A comprehensive course for Class 10th covering all major subjects to build a strong foundation for future competitive exams.',
                features: ['Live Classes', 'Recorded Lectures', 'Daily Practice Problems (DPPs)', 'Weekly Mock Tests', 'Doubt Solving Sessions', 'AI Doubt Support']
            },
            {
                id: 'batch2',
                name: 'Class 8th Foundation Batch',
                image: 'https://res.cloudinary.com/dratpppk4/image/upload/v1756287401/InShot_20250827_150529483_lxlgzh.jpg',
                price: '₹19/month',
                buyLink: 'https://api.whatsapp.com/send?phone=7017811269',
                description: 'This batch focuses on strengthening concepts for Class 8th students, preparing them for board exams and future competitive exam preparation.',
                features: ['Live Classes', 'Recorded Lectures', 'DPPs with Video Solutions', 'Monthly Subjective Tests', 'Dedicated Mentorship']
            },
            {
                id: 'batch3',
                name: 'Class 9th Foundation Batch',
                image: 'https://res.cloudinary.com/dratpppk4/image/upload/v1756286503/InShot_20250827_143546226_ogco0x.jpg',
                price: '₹49/month',
                buyLink: 'https://api.whatsapp.com/send?phone=7017811269',
                description: 'This batch focuses on strengthening concepts for Class 9th students, preparing them for board exams and future competitive exam preparation.',
                features: ['Live Classes', 'Recorded Lectures', 'DPPs with Video Solutions', 'Monthly Subjective Tests', 'Dedicated Mentorship']
            },
            {
                id: 'batch4',
                name: '11th JEE/NEET Batch',
                image: 'https://res.cloudinary.com/dratpppk4/image/upload/v1756286570/InShot_20250827_143712057_aqmktw.jpg',
                price: '₹59/month',
                buyLink: 'https://api.whatsapp.com/send?phone=7017811269',
                description: 'An integrated program for Class 11th students aspiring for JEE and NEET, covering both school syllabus and entrance exam curriculum.',
                features: ['Live Classes (Physics, Chemistry, Maths/Biology)', 'Topic-wise Tests', 'Previous Year Questions (PYQs)', 'PDF Notes & Study Material', 'AI-powered Doubt Engine']
            },
            {
                id: 'batch5',
                name: '12th JEE/NEET Batch',
                image: 'https://res.cloudinary.com/dratpppk4/image/upload/v1756286615/InShot_20250827_143738823_ev3abr.jpg',
                price: '₹59/month',
                buyLink: 'https://api.whatsapp.com/send?phone=7017811269',
                description: 'A dedicated preparation batch for Class 12th students, aimed at excelling in board exams and cracking JEE/NEET with a high rank.',
                features: ['Comprehensive Syllabus Coverage', 'Full & Part Syllabus Mock Tests', 'Revision & Strategy Sessions', 'One-on-one Mentoring', 'Access to Premium Content']
            }
        ];

        const subjectChapters = {
            '6th Maths': ['Chapter 1: Knowing Our Numbers', 'Chapter 2: Whole Numbers', 'Chapter 3: Playing With Numbers', 'Chapter 4: Basic Geometrical Ideas', 'Chapter 5: Understanding Elementary Shapes'],
            '6th Science': ['Chapter 1: Food: Where Does It Come From?', 'Chapter 2: Components of Food', 'Chapter 3: Fibre to Fabric', 'Chapter 4: Sorting Materials into Groups', 'Chapter 5: Separation of Substances'],
            '6th Social Science': ['Chapter 1: The Earth in the Solar System', 'Chapter 2: On the Trail of the Earliest People', 'Chapter 3: From Gathering to Growing Food', 'Chapter 4: What Books and Burials Tell Us'],
            '6th Hindi': ['Chapter 1: Bhasha aur Vyakaran', 'Chapter 2: Varn Vichar', 'Chapter 3: Sangya', 'Chapter 4: Ling aur Vachan', 'Chapter 5: Sarvanam'],
            '6th English': ['Chapter 1: Nouns and Pronouns', 'Chapter 2: Verbs and Tenses', 'Chapter 3: Adjectives and Adverbs', 'Chapter 4: The Donkey (Poem)', 'Chapter 5: The Monkey and the Crocodile'],

            '7th Maths': ['Chapter 1: Integers', 'Chapter 2: Fractions and Decimals', 'Chapter 3: Data Handling', 'Chapter 4: Simple Equations', 'Chapter 5: Lines and Angles'],
            '7th Science': ['Chapter 1: Nutrition in Plants', 'Chapter 2: Nutrition in Animals', 'Chapter 3: Fibre to Fabric', 'Chapter 4: Heat and Temperature', 'Chapter 5: Acids, Bases and Salts'],
            '7th Social Science': ['Chapter 1: Tracing Changes Through a Thousand Years', 'Chapter 2: New Kings and Kingdoms', 'Chapter 3: The Delhi Sultans', 'Chapter 4: The Mughal Empire'],
            '7th Hindi': ['Chapter 1: Khel Khel Mein (Poem)', 'Chapter 2: Veer Kunwar Singh (Story)', 'Chapter 3: Ek Tinka', 'Chapter 4: Rakshabandhan ka Tyohar', 'Chapter 5: Vyakaran: Visheshan'],
            '7th English': ['Chapter 1: The Tiny Teacher', 'Chapter 2: A Gift of Chappals', 'Chapter 3: The Rebel', 'Chapter 4: The King and the Donkey', 'Chapter 5: Gopal and the Hilsa Fish'],
            
            '8th Maths': ['Chapter 1: Rational Numbers', 'Chapter 2: Linear Equations in One Variable', 'Chapter 3: Understanding Quadrilaterals', 'Chapter 4: Practical Geometry', 'Chapter 5: Data Handling'],
            '8th Science': ['Chapter 1: Crop Production and Management', 'Chapter 2: Microorganisms: Friend and Foe', 'Chapter 3: Synthetic Fibres and Plastics', 'Chapter 4: Materials: Metals and Non-Metals', 'Chapter 5: Coal and Petroleum'],
            '8th Social Science': ['Chapter 1: How, When and Where', 'Chapter 2: From Trade to Territory', 'Chapter 3: Rural Life and Society', 'Chapter 4: Tribals, Dikus and the Vision of a Golden Age'],
            '8th Hindi': ['Chapter 1: Dhvani', 'Chapter 2: Lakh ki Chudiyan', 'Chapter 3: Bus Ki Yatra', 'Chapter 4: Deewano Ki Hasti', 'Chapter 5: Chitthiyon ki Anuthi Duniya'],
            '8th English': ['Chapter 1: The Best Christmas Present in the World', 'Chapter 2: The Ant and the Cricket', 'Chapter 3: Glimpses of the Past', 'Chapter 4: Bepin Choudhury\'s Lapse of Memory'],

            '9th Maths': ['Chapter 1: Number Systems', 'Chapter 2: Polynomials', 'Chapter 3: Coordinate Geometry', 'Chapter 4: Linear Equations in Two Variables', 'Chapter 5: Introduction to Euclid\'s Geometry'],
            '9th Physics': ['Chapter 1: Motion', 'Chapter 2: Force and Laws of Motion', 'Chapter 3: Gravitation', 'Chapter 4: Work and Energy', 'Chapter 5: Sound'],
            '9th Chemistry': ['Chapter 1: Matter in Our Surroundings', 'Chapter 2: Is Matter Around Us Pure', 'Chapter 3: Atoms and Molecules', 'Chapter 4: Structure of the Atom', 'Chapter 5: The Mole Concept'],
            '9th Biology': ['Chapter 1: The Fundamental Unit of Life', 'Chapter 2: Tissues', 'Chapter 3: Diversity in Living Organisms', 'Chapter 4: Why Do We Fall Ill?', 'Chapter 5: Natural Resources'],
            '9th Social Science': ['Chapter 1: The French Revolution', 'Chapter 2: Socialism in Europe and the Russian Revolution', 'Chapter 3: Nazism and the Rise of Hitler', 'Chapter 4: Forest Society and Colonialism'],
            '9th Hindi': ['Chapter 1: Do Bailon ki Katha', 'Chapter 2: Lhasakiyore', 'Chapter 3: Consumerism', 'Chapter 4: Saakhie', 'Chapter 5: Vaakh'],
            '9th English': ['Chapter 1: The Fun They Had', 'Chapter 2: The Sound of Music', 'Chapter 3: The Little Girl', 'Chapter 4: A Truly Beautiful Mind'],

            '10th Maths': ['Chapter 1: Real Numbers', 'Chapter 2: Polynomials', 'Chapter 3: Pair of Linear Equations in Two Variables', 'Chapter 4: Quadratic Equations', 'Chapter 5: Arithmetic Progressions'],
            '10th Physics': ['Chapter 1: Light - Reflection and Refraction', 'Chapter 2: Human Eye and the Colourful World', 'Chapter 3: Electricity', 'Chapter 4: Magnetic Effects of Electric Current', 'Chapter 5: Sources of Energy'],
            '10th Chemistry': ['Chapter 1: Chemical Reactions and Equations', 'Chapter 2: Acids, Bases and Salts', 'Chapter 3: Metals and Non-metals', 'Chapter 4: Carbon and Its Compounds', 'Chapter 5: Periodic Classification of Elements'],
            '10th Biology': ['Chapter 1: Life Processes', 'Chapter 2: Control and Coordination', 'Chapter 3: How do Organisms Reproduce?', 'Chapter 4: Heredity and Evolution', 'Chapter 5: Our Environment'],
            '10th Social Science': ['Chapter 1: The Rise of Nationalism in Europe', 'Chapter 2: Nationalism in India', 'Chapter 3: The Making of a Global World', 'Chapter 4: The Age of Industrialisation'],
            '10th Hindi': ['Chapter 1: Ram-Lakshman-Parshuram Samvad', 'Chapter 2: Atmakathya', 'Chapter 3: Neta ji ka Chashma', 'Chapter 4: Surdas ke Pad', 'Chapter 5: Utsah aur At Nahi Rahi Hai'],
            '10th English': ['Chapter 1: A Letter to God', 'Chapter 2: Nelson Mandela', 'Chapter 3: Two Stories about Flying', 'Chapter 4: From the Diary of Anne Frank'],

            '11th JEE Physics': ['Chapter 1: Units and Measurements', 'Chapter 2: Kinematics', 'Chapter 3: Laws of Motion', 'Chapter 4: Work, Energy and Power', 'Chapter 5: Motion of System of Particles and Rigid Body', 'Chapter 6: Gravitation', 'Chapter 7: Properties of Bulk Matter', 'Chapter 8: Thermodynamics', 'Chapter 9: Behaviour of Perfect Gas and Kinetic Theory', 'Chapter 10: Oscillations and Waves'],
            '11th JEE Chemistry': ['Chapter 1: Some Basic Concepts of Chemistry', 'Chapter 2: Structure of Atom', 'Chapter 3: Classification of Elements', 'Chapter 4: Chemical Bonding and Molecular Structure', 'Chapter 5: States of Matter', 'Chapter 6: Thermodynamics', 'Chapter 7: Equilibrium', 'Chapter 8: Redox Reactions', 'Chapter 9: Hydrogen', 'Chapter 10: s-Block Elements'],
            '11th JEE Maths': ['Chapter 1: Sets', 'Chapter 2: Relations and Functions', 'Chapter 3: Trigonometric Functions', 'Chapter 4: Principle of Mathematical Induction', 'Chapter 5: Complex Numbers and Quadratic Equations', 'Chapter 6: Linear Inequalities', 'Chapter 7: Permutations and Combinations', 'Chapter 8: Binomial Theorem', 'Chapter 9: Sequences and Series', 'Chapter 10: Straight Lines'],
            '11th NEET Physics': ['Chapter 1: Physical World', 'Chapter 2: Units and Measurements', 'Chapter 3: Motion in a Straight Line', 'Chapter 4: Laws of Motion', 'Chapter 5: Work, Energy and Power', 'Chapter 6: System of Particles and Rotational Motion', 'Chapter 7: Gravitation', 'Chapter 8: Mechanical Properties of Solids', 'Chapter 9: Mechanical Properties of Fluids', 'Chapter 10: Thermal Properties of Matter'],
            '11th NEET Chemistry': ['Chapter 1: Some Basic Concepts of Chemistry', 'Chapter 2: Structure of Atom', 'Chapter 3: Classification of Elements', 'Chapter 4: Chemical Bonding and Molecular Structure', 'Chapter 5: States of Matter', 'Chapter 6: Thermodynamics', 'Chapter 7: Equilibrium', 'Chapter 8: Redox Reactions', 'Chapter 9: Hydrogen', 'Chapter 10: s-Block Elements'],
            '11th NEET Biology': ['Chapter 1: The Living World', 'Chapter 2: Biological Classification', 'Chapter 3: Plant Kingdom', 'Chapter 4: Animal Kingdom', 'Chapter 5: Morphology of Flowering Plants', 'Chapter 6: Anatomy of Flowering Plants', 'Chapter 7: Structural Organisation in Animals', 'Chapter 8: Cell: The Unit of Life', 'Chapter 9: Biomolecules', 'Chapter 10: Cell Cycle and Cell Division'],

            '12th JEE Physics': ['Chapter 1: Electrostatics', 'Chapter 2: Current Electricity', 'Chapter 3: Magnetic Effects of Current', 'Chapter 4: Magnetism and Matter', 'Chapter 5: Electromagnetic Induction', 'Chapter 6: Alternating Current', 'Chapter 7: Electromagnetic Waves', 'Chapter 8: Ray Optics and Optical Instruments', 'Chapter 9: Wave Optics', 'Chapter 10: Dual Nature of Radiation and Matter'],
            '12th JEE Chemistry': ['Chapter 1: The Solid State', 'Chapter 2: Solutions', 'Chapter 3: Electrochemistry', 'Chapter 4: Chemical Kinetics', 'Chapter 5: Surface Chemistry', 'Chapter 6: General Principles and Processes of Isolation of Elements', 'Chapter 7: p-Block Elements', 'Chapter 8: d- and f-Block Elements', 'Chapter 9: Coordination Compounds', 'Chapter 10: Haloalkanes and Haloarenes'],
            '12th JEE Maths': ['Chapter 1: Relations and Functions', 'Chapter 2: Inverse Trigonometric Functions', 'Chapter 3: Matrices', 'Chapter 4: Determinants', 'Chapter 5: Continuity and Differentiability', 'Chapter 6: Application of Derivatives', 'Chapter 7: Integrals', 'Chapter 8: Application of Integrals', 'Chapter 9: Differential Equations', 'Chapter 10: Vector Algebra'],
            '12th NEET Physics': ['Chapter 1: Electric Charges and Fields', 'Chapter 2: Electrostatic Potential and Capacitance', 'Chapter 3: Current Electricity', 'Chapter 4: Moving Charges and Magnetism', 'Chapter 5: Electromagnetic Induction', 'Chapter 6: Alternating Current', 'Chapter 7: Electromagnetic Waves', 'Chapter 8: Ray Optics and Optical Instruments', 'Chapter 9: Wave Optics', 'Chapter 10: Dual Nature of Radiation and Matter'],
            '12th NEET Chemistry': ['Chapter 1: Solid State', 'Chapter 2: Solutions', 'Chapter 3: Electrochemistry', 'Chapter 4: Chemical Kinetics', 'Chapter 5: Surface Chemistry', 'Chapter 6: General Principles and Processes of Isolation of Elements', 'Chapter 7: p-Block Elements', 'Chapter 8: d- and f-Block Elements', 'Chapter 9: Coordination Compounds', 'Chapter 10: Haloalkanes and Haloarenes'],
            '12th NEET Biology': ['Chapter 1: Reproduction in Organisms', 'Chapter 2: Sexual Reproduction in Flowering Plants', 'Chapter 3: Human Reproduction', 'Chapter 4: Reproductive Health', 'Chapter 5: Principles of Inheritance and Variation', 'Chapter 6: Molecular Basis of Inheritance', 'Chapter 7: Evolution', 'Chapter 8: Human Health and Disease', 'Chapter 9: Strategies for Enhancement in Food Production', 'Chapter 10: Microbes in Human Welfare'],
        };

        const chapterLectures = {
            '6th Maths > Chapter 1: Knowing Our Numbers': [
                { title: 'L-1: Comparing Numbers', id: 'MNGfKvHPRJo' },
                { title: 'L-2: Indian and International System', id: 'video6maths2' },
                { title: 'L-3: Estimation', id: 'video6maths3' }
            ],
            // यहाँ से Chapter 2 का डेटा जोड़ो
            '6th Maths > Chapter 2: Whole Numbers': [
                { title: 'L-1: Introduction to Whole Numbers', id: 'VIDEO_ID_3' },
                { title: 'L-2: Properties of Whole Numbers', id: 'VIDEO_ID_4' },
            ],
            '6th Science > Chapter 1: Food: Where Does It Come From?': [
                { title: 'L-1: Food and Its Sources', id: 'video6science1' },
                { title: 'L-2: What Do Animals Eat?', id: 'video6science2' }
            ],
            '7th Maths > Chapter 1: Integers': [
                { title: 'L-1: Introduction to Integers', id: 'video7maths1' },
                { title: 'L-2: Properties of Integers', id: 'video7maths2' },
                { title: 'L-3: Addition and Subtraction', id: 'video7maths3' }
            ],
            '8th Maths > Chapter 1: Rational Numbers': [
                { title: 'L-1: Properties of Rational Numbers', id: 'video8maths1' },
                { title: 'L-2: Representation on Number Line', id: 'video8maths2' }
            ],
            '9th Maths > Chapter 1: Number Systems': [
                { title: 'L-1: Real Numbers', id: 'video9maths1' },
                { title: 'L-2: Laws of Exponents', id: 'video9maths2' }
            ],
            '10th Maths > Chapter 1: Real Numbers': [
                { title: 'L-1: Euclid\'s Division Lemma', id: 'video10maths1' },
                { title: 'L-2: Fundamental Theorem of Arithmetic', id: 'video10maths2' }
            ],
            '11th JEE Physics > Chapter 1: Units and Measurements': [
                { title: 'L-1: The International System of Units', id: 'video11jeep1' },
                { title: 'L-2: Measurement of Length, Mass, and Time', id: 'video11jeep2' }
            ],
            '12th JEE Physics > Chapter 1: Electrostatics': [
                { title: 'L-1: Electric Charges and Fields', id: 'video12jeep1' },
                { title: 'L-2: Gauss\'s Law', id: 'video12jeep2' }
            ],
            '11th NEET Biology > Chapter 1: The Living World': [
                { title: 'L-1: What is Living?', id: 'video11neeb1' },
                { title: 'L-2: Taxonomy', id: 'video11neeb2' }
            ],
            '12th NEET Biology > Chapter 1: Reproduction in Organisms': [
                { title: 'L-1: Asexual Reproduction', id: 'video12neeb1' },
                { title: 'L-2: Sexual Reproduction', id: 'video12neeb2' }
            ],
            '11th JEE Physics > Chapter 2: Kinematics': [
                { title: 'L-1: Motion in a Straight Line', id: 'video11jeep2-1' },
                { title: 'L-2: Motion in a Plane', id: 'video11jeep2-2' }
            ],
            '12th JEE Physics > Chapter 2: Current Electricity': [
                { title: 'L-1: Electric Current', id: 'video12jeep2-1' },
                { title: 'L-2: Ohm\'s Law and Resistance', id: 'video12jeep2-2' }
            ],
            '11th NEET Biology > Chapter 2: Biological Classification': [
                { title: 'L-1: Kingdoms of Classification', id: 'video11neeb2-1' },
                { title: 'L-2: Monera and Protista', id: 'video11neeb2-2' }
            ]
        };

        const quizData = {
            '6th Maths > Chapter 1: Knowing Our Numbers': {
                questions: [
                    { q: 'What is the predecessor of 10,001?', a: 'a', options: { a: '10000', b: '10002', c: '10001', d: '9999' }},
                    { q: 'How many thousands are there in one lakh?', a: 'b', options: { a: '10', b: '100', c: '1000', d: '10000' }},
                    { q: 'What is the sum of the place values of 7 and 9 in 7,89,012?', a: 'a', options: { a: '709000', b: '79000', c: '700900', d: '78900' }},
                    { q: 'Which is the smallest 6-digit number?', a: 'c', options: { a: '100001', b: '99999', c: '100000', d: '900000' }},
                    { q: 'In the International system, how do we write 55,555?', a: 'd', options: { a: '55 thousand 555', b: '555 hundred 55', c: '555 thousand 55', d: '55 thousand, five hundred fifty-five' }}
                ]
            },
            // यहाँ से Chapter 2 का डेटा जोड़ो
            '6th Maths > Chapter 2: Whole Numbers': {
                questions: [
                    { q: 'What is the smallest whole number?', a: 'a', options: { a: '0', b: '1', c: '-1', d: 'None' }},
                    { q: 'Which of the following is not a whole number?', a: 'd', options: { a: '5', b: '25', c: '0', d: '-5' }}
                ]
            }, 
            '7th Maths > Chapter 1: Integers': {
                questions: [
                    { q: 'The sum of two negative integers is:', a: 'b', options: { a: 'a positive integer', b: 'a negative integer', c: '0', d: 'could be either' }},
                    { q: 'The product of a positive and a negative integer is:', a: 'a', options: { a: 'a negative integer', b: 'a positive integer', c: '0', d: 'could be either' }},
                    { q: 'The value of $(-10) \times 5$ is:', a: 'd', options: { a: '50', b: '15', c: '5', d: '-50' }},
                    { q: 'What is the additive inverse of -12?', a: 'c', options: { a: '1/12', b: '-1/12', c: '12', d: '0' }},
                    { q: '$-5 - (-8) = ?$', a: 'a', options: { a: '3', b: '-13', c: '-3', d: '13' }}
                ]
            },
            '8th Maths > Chapter 1: Rational Numbers': {
                questions: [
                    { q: 'Which of the following is a rational number?', a: 'b', options: { a: '$\sqrt{2}$', b: '$0.75$', c: '$\pi$', d: 'None of these' }},
                    { q: 'Is 0 a rational number?', a: 'a', options: { a: 'Yes', b: 'No', c: 'Maybe', d: 'Cannot be determined' }},
                    { q: 'The reciprocal of $-5/8$ is:', a: 'c', options: { a: '$5/8$', b: '$-8/5$', c: '$-8/5$', d: '$-1$' }},
                    { q: 'The rational number that does not have a reciprocal is:', a: 'd', options: { a: '1', b: '-1', c: 'Any integer', d: '0' }},
                    { q: 'The additive inverse of $2/3$ is:', a: 'a', options: { a: '$-2/3$', b: '$3/2$', c: '$-3/2$', d: '0' }}
                ]
            },
            '9th Maths > Chapter 1: Number Systems': {
                questions: [
                    { q: 'Every rational number is a:', a: 'a', options: { a: 'real number', b: 'natural number', c: 'integer', d: 'whole number' }},
                    { q: '$\sqrt{2}$ is an:', a: 'b', options: { a: 'rational number', b: 'irrational number', c: 'integer', d: 'natural number' }},
                    { q: 'The decimal expansion of a rational number is:', a: 'd', options: { a: 'terminating', b: 'non-terminating recurring', c: 'non-terminating non-recurring', d: 'both (a) and (b)' }},
                    { q: 'Which of the following is an irrational number?', a: 'a', options: { a: '$\pi$', b: '$3.14$', c: '$22/7$', d: '$\sqrt{9}$' }},
                    { q: 'Which of the following is not a rational number?', a: 'c', options: { a: '$\sqrt{4}$', b: '$0.333...$', c: '$\sqrt{7}$', d: '$0$' }}
                ]
            },
            '10th Maths > Chapter 1: Real Numbers': {
                questions: [
                    { q: 'The product of a non-zero rational and an irrational number is:', a: 'c', options: { a: 'always rational', b: 'always irrational', c: 'always irrational', d: 'either rational or irrational' }},
                    { q: 'The HCF of 96 and 404 by prime factorization is:', a: 'b', options: { a: '96', b: '4', c: '2', d: '101' }},
                    { q: 'The decimal expansion of the rational number $14587/1250$ will terminate after how many decimal places?', a: 'd', options: { a: '1', b: '2', c: '3', d: '4' }},
                    { q: 'If $p$ and $q$ are two integers, then a number of the form $p/q$ where $q \ne 0$ is called:', a: 'a', options: { a: 'rational number', b: 'irrational number', c: 'integer', d: 'whole number' }},
                    { q: 'For some integer $m$, every even integer is of the form:', a: 'c', options: { a: '$m+1$', b: '$2m+1$', c: '$2m$', d: '$m$' }}
                ]
            },
            '11th JEE Physics > Chapter 1: Units and Measurements': {
                questions: [
                    { q: 'What is the SI unit of luminous intensity?', a: 'd', options: { a: 'Mole', b: 'Ampere', c: 'Kelvin', d: 'Candela' }},
                    { q: 'The dimension of G (universal gravitational constant) is:', a: 'a', options: { a: '$M^{-1}L^3T^{-2}$', b: '$M^1L^3T^{-2}$', c: '$M^{-1}L^{-3}T^{-2}$', d: '$M^1L^{-3}T^{-2}$' }},
                    { q: 'Which of the following is a dimensionally consistent equation?', a: 'a', options: { a: '$v = u + at$', b: '$v = u + at^2$', c: '$v = u + a/t$', d: '$v = u^2 + at$' }},
                    { q: 'Which of the following physical quantities has the same dimensions as that of Energy?', a: 'b', options: { a: 'Force', b: 'Torque', c: 'Momentum', d: 'Pressure' }},
                    { q: 'What is the SI unit of torque?', a: 'c', options: { a: 'Joule', b: 'Newton', c: 'N-m', d: 'Watt' }}
                ]
            },
            '11th JEE Physics > Chapter 2: Kinematics': {
                questions: [
                    { q: 'A car starts from rest and accelerates uniformly at 2 m/s² for 5 seconds. What is its final velocity?', a: 'b', options: { a: '5 m/s', b: '10 m/s', c: '15 m/s', d: '20 m/s' }},
                    { q: 'The velocity of a particle is given by $v=3t^2+2t$. What is its instantaneous acceleration at t=2s?', a: 'a', options: { a: '14 m/s²', b: '12 m/s²', c: '10 m/s²', d: '16 m/s²' }},
                    { q: 'Which of the following is a scalar quantity?', a: 'd', options: { a: 'Velocity', b: 'Displacement', c: 'Acceleration', d: 'Distance' }},
                    { q: 'The area under a velocity-time graph represents:', a: 'a', options: { a: 'Displacement', b: 'Acceleration', c: 'Speed', d: 'Force' }},
                    { q: 'A body is projected vertically upwards with a velocity of 40 m/s. What is its velocity at the highest point?', a: 'b', options: { a: '40 m/s', b: '0 m/s', c: '20 m/s', d: '-40 m/s' }}
                ]
            },
            '12th JEE Physics > Chapter 1: Electrostatics': {
                questions: [
                    { q: 'The electric field inside a hollow spherical conductor is:', a: 'c', options: { a: 'Depends on charge', b: 'Depends on radius', c: 'Zero', d: 'Constant but non-zero' }},
                    { q: 'The SI unit of electric flux is:', a: 'b', options: { a: '$N/C$', b: '$N⋅m^2/C$', c: '$J/C$', d: '$V/m$' }},
                    { q: 'According to Coulomb\'s law, the force between two charges is proportional to:', a: 'a', options: { a: 'Product of the charges', b: 'Sum of the charges', c: 'Difference of the charges', d: 'Ratio of the charges' }},
                    { q: 'The force per unit charge is known as:', a: 'd', options: { a: 'Electric potential', b: 'Electric current', c: 'Electric resistance', d: 'Electric field' }},
                    { q: 'Two charges, $q_1$ and $q_2$, are separated by a distance $r$. What is the electrostatic force between them?', a: 'c', options: { a: '$k \cdot q_1q_2/r$', b: '$k \cdot q_1q_2/r^3$', c: '$k \cdot q_1q_2/r^2$', d: '$k \cdot q_1q_2$' }}
                ]
            },
            '11th NEET Biology > Chapter 1: The Living World': {
                questions: [
                    { q: 'Who is known as the "Father of Taxonomy"?', a: 'c', options: { a: 'Aristotle', b: 'Theophrastus', c: 'Carolus Linnaeus', d: 'John Ray' }},
                    { q: 'The term "new systematics" was coined by:', a: 'a', options: { a: 'Julian Huxley', b: 'G. Simpson', c: 'Carolus Linnaeus', d: 'A.P. de Candolle' }},
                    { q: 'Binomial nomenclature was given by:', a: 'b', options: { a: 'Darwin', b: 'Linnaeus', c: 'Lamarck', d: 'Aristotle' }},
                    { q: 'Growth in living organisms is:', a: 'a', options: { a: 'irreversible', b: 'reversible', c: 'both', d: 'None' }},
                    { q: 'Taxonomy includes:', a: 'c', options: { a: 'Nomenclature', b: 'Classification', c: 'Both (a) and (b)', d: 'None' }}
                ]
            },
            '12th NEET Biology > Chapter 1: Reproduction in Organisms': {
                questions: [
                    { q: 'The fusion of male and female gametes is called:', a: 'd', options: { a: 'Gametogenesis', b: 'Embryogenesis', c: 'Parthenogenesis', d: 'Syngamy' }},
                    { q: 'Asexual reproduction involves:', a: 'c', options: { a: 'Two parents', b: 'Fusion of gametes', c: 'Single parent', d: 'Zygote formation' }},
                    { q: 'Which of the following reproduces through budding?', a: 'a', options: { a: 'Yeast', b: 'Amoeba', c: 'Starfish', d: 'Hydra' }},
                    { q: 'Which of the following has the longest life span?', a: 'd', options: { a: 'Dog', b: 'Banyan tree', c: 'Elephant', d: 'Tortoise' }},
                    { q: 'Fertilization is defined as the process by which:', a: 'b', options: { a: 'sperm enters the egg', b: 'male and female gametes fuse', c: 'zygote is formed', d: 'embryo is formed' }}
                ]
            },
            '10th Maths > Chapter 4: Quadratic Equations': {
                questions: [
                    { q: 'The roots of a quadratic equation are real if the discriminant is:', a: 'c', options: { a: 'negative', b: 'positive', c: 'non-negative', d: 'zero' }},
                    { q: 'The quadratic formula to find the roots of $ax^2 + bx + c = 0$ is:', a: 'a', options: { a: '$-b \pm \sqrt{b^2-4ac} / 2a$', b: '$b \pm \sqrt{b^2-4ac} / 2a$', c: '$-b + \sqrt{b^2-4ac} / 2a$', d: '$-b - \sqrt{b^2-4ac} / 2a$' }}
                ]
            },
            '10th Physics > Chapter 3: Electricity': {
                questions: [
                    { q: 'What is the SI unit of electric resistance?', a: 'b', options: { a: 'Ampere', b: 'Ohm', c: 'Volt', d: 'Joule' }},
                    { q: 'Ohm\'s law states:', a: 'a', options: { a: '$V=IR$', b: '$I=VR$', c: '$R=IV$', d: '$V=I/R$' }}
                ]
            },
            '12th JEE Physics > Chapter 2: Current Electricity': {
                questions: [
                    { q: 'The resistance of a wire is R. If its length is doubled and radius is halved, its new resistance will be:', a: 'd', options: { a: 'R', b: '2R', c: '4R', d: '8R' }},
                    { q: 'Kirchhoff\'s first law is based on the conservation of:', a: 'b', options: { a: 'Energy', b: 'Charge', c: 'Momentum', d: 'Mass' }}
                ]
            }
        };

        const subjectiveQuestions = {
            'Chapter 1: Knowing Our Numbers': [
                'Explain the difference between Indian and International number systems.',
                'Write the expanded form of 3,56,87,123.'
            ],
            // यहाँ से Chapter 2 का डेटा जोड़ो
            'Chapter 2: Whole Numbers': [
                'Define Whole Numbers and give 5 examples.',
                'Explain the commutative property for addition with an example.'
            ],
            'Chapter 1: Integers': [
                'What is the difference between natural numbers and integers? Give examples.',
                'Explain the properties of addition of integers with an example.'
            ],
            'Chapter 1: Rational Numbers': [
                'State and explain the Fundamental Theorem of Arithmetic.',
                'Prove that $\sqrt{5}$ is an irrational number.'
            ],
            'Chapter 1: Number Systems': [
                'Define a rational and an irrational number. Give two examples of each.',
                'Explain how to represent $\sqrt{2}$ on a number line.'
            ],
            'Chapter 1: Real Numbers': [
                'State and explain the Fundamental Theorem of Arithmetic.',
                'Prove that $\sqrt{5}$ is an irrational number.'
            ],
            'Chapter 1: Units and Measurements': [
                'Differentiate between fundamental and derived units with two examples each.',
                'Explain the parallax method for measuring the distance to a far-off star.'
            ],
            'Chapter 2: Kinematics': [
                'Define uniform and non-uniform motion. Give examples.',
                'Derive the first equation of motion using graphical method.'
            ],
            'Chapter 1: Electrostatics': [
                'State Gauss\'s law in electrostatics. Explain its application to find the electric field due to an infinitely long straight charged wire.',
                'Derive the expression for the electric field due to a point charge.'
            ],
            'Chapter 1: The Living World': [
                'What is biodiversity? Describe the need for its classification.',
                'Give an account of the taxonomic hierarchy.'
            ],
            'Chapter 1: Reproduction in Organisms': [
                'What is the difference between asexual and sexual reproduction? List two methods of asexual reproduction in animals.',
                'Describe the events in post-fertilization in a typical flowering plant.'
            ],
            'Chapter 4: Quadratic Equations': [
                'Explain the nature of roots of a quadratic equation based on its discriminant.',
                'Solve the quadratic equation $2x^2 + 5x - 3 = 0$ using the quadratic formula.'
            ],
            'Chapter 3: Electricity': [
                'State and explain Ohm\'s law.',
                'Explain what is an electric circuit. Differentiate between an open and closed circuit.'
            ],
            'Chapter 2: Current Electricity': [
                'State and explain Kirchhoff\'s laws.',
                'Explain the working of a Wheatstone bridge with a neat circuit diagram.'
            ],
            'Chapter 2: Biological Classification': [
                'Write a short note on the five-kingdom classification system.',
                'Explain the characteristics of the Kingdom Monera.'
            ]
        };
        
        const downloadsData = {
            '6th Maths > Chapter 1: Knowing Our Numbers': [{name: 'Notes', link: '#notes6m1'}, {name: 'DPP-1', link: '#dpp6m1'}],
            // यहाँ से Chapter 2 का डेटा जोड़ो
            '6th Maths > Chapter 2: Whole Numbers': [{name: 'Notes', link: '#notes6m1'}, {name: 'DPP-1', link: '#dpp6m1'}
                ],
            '6th Science > Chapter 1: Food: Where Does It Come From?': [{name: 'Notes', link: '#notes6s1'}, {name: 'DPP-1', link: '#dpp6s1'}],
            '7th Maths > Chapter 1: Integers': [{name: 'Notes', link: '#notes7m1'}, {name: 'DPP-1', link: '#dpp7m1'}],
            '8th Maths > Chapter 1: Rational Numbers': [{name: 'Notes', link: '#notes8m1'}, {name: 'DPP-1', link: '#dpp8m1'}],
            '9th Maths > Chapter 1: Number Systems': [{name: 'Notes', link: '#notes9m1'}, {name: 'DPP-1', link: '#dpp9m1'}],
            '10th Maths > Chapter 1: Real Numbers': [{name: 'Notes', link: '#notes10m1'}, {name: 'DPP-1', link: '#dpp10m1'}],
            '11th JEE Physics > Chapter 1: Units and Measurements': [{name: 'Notes', link: '#notes11jeep1'}, {name: 'DPP-1', link: '#dpp11jeep1'}],
            '11th JEE Physics > Chapter 2: Kinematics': [{name: 'Notes', link: '#notes11jeep2'}, {name: 'DPP-1', link: '#dpp11jeep2'}],
            '12th JEE Physics > Chapter 1: Electrostatics': [{name: 'Notes', link: '#notes12jeep1'}, {name: 'DPP-1', link: '#dpp12jeep1'}],
            '11th NEET Biology > Chapter 1: The Living World': [{name: 'Notes', link: '#notes11neeb1'}, {name: 'DPP-1', link: '#dpp11neeb1'}],
            '12th NEET Biology > Chapter 1: Reproduction in Organisms': [{name: 'Notes', link: '#notes12neeb1'}, {name: 'DPP-1', link: '#dpp12neeb1'}],
            '10th Maths > Chapter 4: Quadratic Equations': [{name: 'Notes', link: '#notes10m4'}, {name: 'DPP-1', link: '#dpp10m4'}],
            '10th Physics > Chapter 3: Electricity': [{name: 'Notes', link: '#notes10p3'}, {name: 'DPP-1', link: '#dpp10p3'}],
            '12th JEE Physics > Chapter 2: Current Electricity': [{name: 'Notes', link: '#notes12jeep2'}, {name: 'DPP-1', link: '#dpp12jeep2'}]
        };

        let pageHistory = ['login-page'];

                let currentClass = '';

        // All class information, prices, descriptions, etc.
        const classInfoData = {
            '6th': {
                price: '₹19/month',
                description: 'Explore',
                features: ['Live Classes', 'Recorded Lectures', 'Daily Practice Problems (DPPs)', 'Weekly Mock Tests', 'Doubt Solving Sessions'],
                banner: 'https://res.cloudinary.com/dratpppk4/image/upload/v1756286242/InShot_20250827_142708262_munbbt.jpg'
            },
            '7th': {
                price: '₹19/month',
                description: 'Explore',
                features: ['Live Classes', 'Recorded Lectures', 'DPPs with Video Solutions', 'Monthly Subjective Tests', 'Dedicated Mentorship'],
                banner: 'https://res.cloudinary.com/dratpppk4/image/upload/v1756286242/InShot_20250827_142708262_munbbt.jpg'
            },
            '8th': {
                price: '₹19/month',
                description: 'Explore',
                features: ['Live Classes', 'Recorded Lectures', 'Daily Practice Problems', 'Weekly Mock Tests', 'Doubt Solving Sessions'],
                banner: 'https://res.cloudinary.com/dratpppk4/image/upload/v1756286242/InShot_20250827_142708262_munbbt.jpg'
            },
            '9th': {
                price: '₹29/month',
                description: 'Explore',
                features: ['Comprehensive Syllabus Coverage', 'Full & Part Syllabus Mock Tests', 'Revision & Strategy Sessions', 'One-on-one Mentoring', 'Access to Premium Content'],
                banner: 'https://res.cloudinary.com/dratpppk4/image/upload/v1756286242/InShot_20250827_142708262_munbbt.jpg'
            },
            '10th': {
                price: '₹29/month',
                description: 'Explore',
                features: ['Live Classes (Physics, Chemistry, Maths/Biology)', 'Topic-wise Tests', 'Previous Year Questions (PYQs)', 'PDF Notes & Study Material', 'AI-powered Doubt Engine'],
                banner: 'https://res.cloudinary.com/dratpppk4/image/upload/v1756286242/InShot_20250827_142708262_munbbt.jpg'
            },
            '11th JEE': {
                price: '₹49/month',
                description: 'Explore',
                features: ['Live Classes (Physics, Chemistry, Maths/Biology)', 'Topic-wise Tests', 'Previous Year Questions (PYQs)', 'PDF Notes & Study Material', 'AI-powered Doubt Engine'],
                banner: 'https://res.cloudinary.com/dratpppk4/image/upload/v1756286242/InShot_20250827_142708262_munbbt.jpg'
            },
            '12th JEE': {
                price: '₹69/month',
                description: 'Explore',
                features: ['Comprehensive Syllabus Coverage', 'Full & Part Syllabus Mock Tests', 'Revision & Strategy Sessions', 'One-on-one Mentoring', 'Access to Premium Content'],
                banner: 'https://res.cloudinary.com/dratpppk4/image/upload/v1756286242/InShot_20250827_142708262_munbbt.jpg'
            },
            '11th NEET': {
                price: '₹49/month',
                description: 'Explore',
                features: ['Live Classes (Physics, Chemistry, Maths/Biology)', 'Topic-wise Tests', 'Previous Year Questions (PYQs)', 'PDF Notes & Study Material', 'AI-powered Doubt Engine'],
                banner: 'https://res.cloudinary.com/dratpppk4/image/upload/v1756286242/InShot_20250827_142708262_munbbt.jpg'
            },
            '12th NEET': {
                price: '₹69/month',
                description: 'Explore',
                features: ['Comprehensive Syllabus Coverage', 'Full & Part Syllabus Mock Tests', 'Revision & Strategy Sessions', 'One-on-one Mentoring', 'Access to Premium Content'],
                banner: 'https://res.cloudinary.com/dratpppk4/image/upload/v1756286242/InShot_20250827_142708262_munbbt.jpg'
            }
        };

        const classCodes = {
            '6th': 'drsir',
            '7th': 'vrdr',
            '8th': 'krsir',
            '9th': 'mksir',
            '10th': 'tksir',
            '11th JEE': 'nkpksir',
            '12th JEE': 'ckrksir',
            '11th NEET': 'lkjksir', 
            '12th NEET': 'pkmksir'  
        };

 // Global variable to store all user data
let allUsers = JSON.parse(localStorage.getItem('allUsers')) || [];

// Function to save new user data to localStorage
function saveUserData(userData) {
    // Find if a user with the same mobile number already exists
    const existingUserIndex = allUsers.findIndex(u => u.mobile === userData.mobile);
    if (existingUserIndex > -1) {
        // If yes, update their data
        allUsers[existingUserIndex] = userData;
    } else {
        // If not, add the new user to the array
        allUsers.push(userData);
    }
    // Save the entire updated array back to localStorage
    localStorage.setItem('allUsers', JSON.stringify(allUsers));
}

// Function to handle the login process
function handleLogin(e) {
    e.preventDefault();
    const name = document.getElementById('login-name').value;
    const mobile = document.getElementById('login-mobile').value;
    const selectedClass = document.getElementById('login-class').value;

    userData = {
        name: name,
        mobile: mobile,
        class: selectedClass
    };
    localStorage.setItem('userData', JSON.stringify(userData));
    
    // Call the function to save the new user's data
    saveUserData(userData);
    
    loggedIn = true;
    
    document.getElementById('login-page').style.display = 'none';
    document.getElementById('main-app-container').style.display = 'block';
    showPage('home-page');
    updateProfile();
    showToast('Login successful!');
}

// Function to show the All Users page and handle admin access
function showAllUsers() {
    showPage('all-users-page');
    document.getElementById('all-users-list').innerHTML = '';
    document.getElementById('admin-code-input').value = '';
}

// Function to verify the code and display the user list
function verifyAdminCode() {
    const inputCode = document.getElementById('admin-code-input').value;
    const usersList = document.getElementById('all-users-list');

    if (inputCode === 'sirdr') {
        usersList.innerHTML = '';
        if (allUsers.length === 0) {
            usersList.innerHTML = '<p>No user data found.</p>';
        } else {
            allUsers.forEach(user => {
                const userCard = document.createElement('div');
                userCard.classList.add('card');
                userCard.innerHTML = `
                    <h3>${user.name}</h3>
                    <p>Mobile: ${user.mobile}</p>
                    <p>Class: ${user.class}</p>
                `;
                usersList.appendChild(userCard);
            });
        }
    } else {
        showToast('Incorrect code. Access denied.');
        usersList.innerHTML = '';
    }
}

 // Start of new code for comment section
function openCommentChat() {
    document.getElementById('comment-chat-window').classList.add('open');
}

function closeCommentChat() {
    document.getElementById('comment-chat-window').classList.remove('open');
}

function sendComment() {
    const input = document.getElementById('comment-input');
    const message = input.value.trim();
    if (message) {
        const currentUser = JSON.parse(localStorage.getItem('currentUser'));
        const name = currentUser ? currentUser.name : 'Guest';
        const comments = JSON.parse(localStorage.getItem('commentHistory')) || [];
        const newComment = { text: message, user: name, timestamp: new Date().toLocaleString() };
        comments.push(newComment);
        localStorage.setItem('commentHistory', JSON.stringify(comments));
        input.value = '';
        loadComments();
    }
}

function loadComments() {
    const chatMessagesContainer = document.getElementById('chat-messages');
    chatMessagesContainer.innerHTML = '';
    const comments = JSON.parse(localStorage.getItem('commentHistory')) || [];
    const currentUser = JSON.parse(localStorage.getItem('currentUser'));

    comments.forEach(comment => {
        const messageDiv = document.createElement('div');
        messageDiv.classList.add('chat-message');
        if (currentUser && currentUser.name === comment.user) {
            messageDiv.classList.add('self');
        }
        messageDiv.innerHTML = `
            <p>${comment.text}</p>
            <div class="meta">${comment.user} at ${comment.timestamp}</div>
        `;
        chatMessagesContainer.appendChild(messageDiv);
    });
    // Scroll to the bottom of the chat window to show the latest message
    chatMessagesContainer.scrollTop = chatMessagesContainer.scrollHeight;
}

function clearCommentChat() {
    const passcode = prompt("Please enter the unique code to clear the chat:");
    // The passcode is set as "ramom" in the original code, but you can change it for security
    if (passcode === "ramom") {
        localStorage.removeItem('commentHistory');
        loadComments();
        alert("Chat cleared successfully!");
    } else {
        alert("Incorrect unique code!");
    }
}
// End of new code for comment section

// Add this to your document.addEventListener('DOMContentLoaded', ...) block
document.addEventListener('DOMContentLoaded', () => {
    // ... other code
    // Load comments on page load
    loadComments();
    // ... other code
});

        function showClassInfoPage(className) {
            currentClass = className;
            const allPages = document.querySelectorAll('.page');
            allPages.forEach(page => page.classList.remove('active'));
            
            document.getElementById('class-info-page').classList.add('active');
            
            const currentPageId = 'class-info-page';
            if (pageHistory[pageHistory.length - 1] !== currentPageId) {
                history.pushState({ pageId: currentPageId, dynamicParam: className }, '', `#${currentPageId}`);
                pageHistory.push(currentPageId);
            }

            document.getElementById('class-info-title').innerText = className;
            document.getElementById('unique-code-input').value = '';
            document.getElementById('error-message').style.display = 'none';

            // Set dynamic data based on the class
            const classData = classInfoData[className];
            if (classData) {
                document.getElementById('explore-text').innerText = classData.description;
                document.getElementById('batch-price').innerText = classData.price;
                document.getElementById('banner-image').src = classData.banner;
            }
        }
        
        function showBatchDetailsForClass(className) {
            const batchDetails = classInfoData[className];
            if (!batchDetails) {
                showToast('Batch details not available for this class.');
                return;
            }

            document.getElementById('batch-details-title').textContent = className;
            document.getElementById('batch-details-description').textContent = batchDetails.description;
            const featuresList = document.getElementById('batch-details-features');
            featuresList.innerHTML = '';
            batchDetails.features.forEach(feature => {
                const li = document.createElement('li');
                li.innerHTML = `<span class="material-icons" style="font-size: 1em; color: green; margin-right: 5px;">check_circle</span> ${feature}`;
                featuresList.appendChild(li);
            });
            
            document.getElementById('batch-details-popup').style.display = 'flex';
        }

        function verifyCode() {
            const inputCode = document.getElementById('unique-code-input').value.toLowerCase();
            const errorMessage = document.getElementById('error-message');
            
            const correctCode = classCodes[currentClass];

            if (inputCode === correctCode) {
                showPage('class-subjects-page', currentClass);
                errorMessage.style.display = 'none';
            } else {
                errorMessage.style.display = 'block';
            }
        }
        
        function showPage(pageId, dynamicParam = '') {
            if (!loggedIn) {
                if (pageId !== 'login-page') {
                    showToast('Please login to access the app.');
                    return;
                }
            }

            const currentPageId = pageHistory[pageHistory.length - 1];
            if (currentPageId !== pageId) {
                history.pushState({ pageId: pageId, dynamicParam: dynamicParam }, '', `#${pageId}`);
                pageHistory.push(pageId);
            }

            const pages = document.querySelectorAll('.page');
            pages.forEach(page => page.classList.remove('active'));
            document.getElementById(pageId).classList.add('active');
            
            if (pageId === 'class-subjects-page') {
                currentClass = dynamicParam;
                document.getElementById('class-subjects-title').textContent = `Subjects: ${dynamicParam}`;
                updateSubjects(currentClass);
            } else if (pageId === 'subject-chapters-page') {
                currentSubject = dynamicParam;
                document.getElementById('subject-chapters-title').textContent = `${currentClass} > ${currentSubject}`;
                updateChapters(currentSubject);
            } else if (pageId === 'chapter-content-page') {
                currentChapter = dynamicParam;
                document.getElementById('chapter-content-title').textContent = `${currentSubject} > ${dynamicParam}`;
                updateProgressBar();
            } else if (pageId === 'lectures-page') {
                document.getElementById('lectures-title').textContent = `Lectures: ${currentChapter}`;
                updateLectures();
            } else if (pageId === 'questions-menu-page') {
                document.getElementById('questions-title').textContent = `Questions: ${currentChapter}`;
            } else if (pageId === 'test-details-page') {
                let testTitle;
                if (dynamicParam === 'MCQ Test') {
                     testTitle = `${currentClass} ${currentSubject} > ${currentChapter}`;
                } else {
                    testTitle = dynamicParam;
                }
                updateTest(testTitle);
                document.getElementById('test-details-title').textContent = testTitle;
            } else if (pageId === 'subjective-questions-page') {
                document.getElementById('subjective-questions-title').textContent = `Subjective Questions: ${currentChapter}`;
                updateSubjectiveQuestions();
            } else if (pageId === 'notifications-page') {
                document.getElementById('notification-dot').style.display = 'none';
            } else if (pageId === 'chapter-downloads-page') {
                document.getElementById('chapter-downloads-title').textContent = `Downloads: ${currentChapter}`;
                updateDownloads();
            } else if (pageId === 'settings-page') {
                updateProfile();
            } else if (pageId === 'doubt-page') {
                document.getElementById('doubt-form').style.display = 'block';
            } else if (pageId === 'pv-batches-page') {
                updateBatches();
            } else if (pageId === 'home-page') {
                showWelcomePopup();
            }

            window.scrollTo(0, 0); 
        }
        
        function showWelcomePopup() {
            const popup = document.getElementById('welcome-popup');
            popup.style.display = 'block';
        }

        function closePopup(popupId) {
            document.getElementById(popupId).style.display = 'none';
        }

        window.addEventListener('popstate', (event) => {
            if (event.state && event.state.pageId) {
                const pages = document.querySelectorAll('.page');
                pages.forEach(page => page.classList.remove('active'));
                document.getElementById(event.state.pageId).classList.add('active');
                pageHistory.pop();
            }
        });

        function toggleNav() {
            document.getElementById("mySidebar").classList.toggle('active');
        }

        function toggleProfileMenu() {
            const menu = document.getElementById('profile-menu');
            menu.style.display = menu.style.display === 'flex' ? 'none' : 'flex';
        }

        function updateSubjects(className) {
            const subjectsList = document.getElementById('class-subjects-list');
            subjectsList.innerHTML = '';
            const subjects = classData[className];
            if (subjects) {
                subjects.forEach(subject => {
                    const card = document.createElement('div');
                    card.classList.add('card');
                    card.innerHTML = `<h3>${subject}</h3><span class="material-icons">arrow_forward_ios</span>`;
                    card.onclick = () => showPage('subject-chapters-page', subject);
                    subjectsList.appendChild(card);
                });
            }
        }

        function updateBatches() {
            const batchesList = document.getElementById('batches-list');
            batchesList.innerHTML = '';
            batchData.forEach(batch => {
                const batchCard = document.createElement('div');
                batchCard.classList.add('batch-card');
                batchCard.innerHTML = `
                    <img src="${batch.image}" alt="${batch.name}" class="batch-image">
                    <div class="batch-card-content">
                        <h3>${batch.name}</h3>
                        <div class="batch-actions">
                            <button class="." onclick="showBatchDetails('${batch.id}')">Explore</button>
                            <p class="batch-price">${batch.price}</p>
                            <a href="${batch.buyLink}" target="_blank"><button class="buy-btn">Buy Now</button></a>
                        </div>
                    </div>
                `;
                batchesList.appendChild(batchCard);
            });
        }
        
        function showBatchDetails(batchId) {
            const batch = batchData.find(b => b.id === batchId);
            if (!batch) return;
            
            document.getElementById('batch-details-title').textContent = batch.name;
            document.getElementById('batch-details-description').textContent = batch.description;
            const featuresList = document.getElementById('batch-details-features');
            featuresList.innerHTML = '';
            batch.features.forEach(feature => {
                const li = document.createElement('li');
                li.innerHTML = `<span class="material-icons" style="font-size: 1em; color: green; margin-right: 5px;">check_circle</span> ${feature}`;
                featuresList.appendChild(li);
            });
            
            document.getElementById('batch-details-popup').style.display = 'flex';
        }
        
        function updateChapters(subjectName) {
            const chaptersList = document.getElementById('subject-chapters-list');
            chaptersList.innerHTML = '';
            const chapters = subjectChapters[`${currentClass} ${subjectName}`] || [];
            chapters.forEach(chapter => {
                const card = document.createElement('div');
                card.classList.add('card');
                card.innerHTML = `<h3>${chapter}</h3><span class="material-icons">arrow_forward_ios</span>`;
                card.onclick = () => showPage('chapter-content-page', chapter);
                chaptersList.appendChild(card);
            });
        }

        function updateLectures() {
            const lecturesList = document.getElementById('lectures-list');
            lecturesList.innerHTML = '';
            const lectures = chapterLectures[`${currentClass} ${currentSubject} > ${currentChapter}`] || [];
            
            const firstVideoId = lectures.length > 0 ? lectures[0].id : 'dQw4w9WgXcQ'; // Placeholder
            document.getElementById('video-player').innerHTML = `<iframe src="https://www.youtube.com/embed/${firstVideoId}" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>`;

            lectures.forEach(lecture => {
                const card = document.createElement('div');
                card.classList.add('card');
                card.innerHTML = `<h3>${lecture.title}</h3><p>Teacher: Vikrant Sir</p><span class="material-icons">play_circle_filled</span>`;
                card.onclick = () => {
                    loadVideo(lecture.id);
                    markLectureAsCompleted(lecture.title);
                };
                lecturesList.appendChild(card);
            });
        }
        
        function loadVideo(videoId) {
            const player = document.getElementById('video-player');
            player.innerHTML = `<iframe src="https://www.youtube.com/embed/${videoId}?autoplay=1" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>`;
        }
        
        function updateTest(testName) {
            const testForm = document.getElementById('quiz-form');
            testForm.innerHTML = '';
            document.getElementById('result-section').style.display = 'none';

            const test = quizData[testName];
            if (!test) {
                testForm.innerHTML = '<p>Test not available for this chapter.</p>';
                return;
            }
            document.getElementById('total-questions').textContent = test.questions.length;

            test.questions.forEach((q, index) => {
                const questionCard = document.createElement('div');
                questionCard.classList.add('question-card');
                
                let optionsHtml = '';
                for (const option in q.options) {
                    optionsHtml += `<label><input type="radio" name="q${index + 1}" value="${option}"> ${q.options[option]}</label>`;
                }
                
                questionCard.innerHTML = `
                    <h4>${index + 1}. ${q.q}</h4>
                    <div class="options">${optionsHtml}</div>
                `;
                testForm.appendChild(questionCard);
            });
            
            const submitButton = document.createElement('button');
            submitButton.type = 'submit';
            submitButton.classList.add('submit-btn');
            submitButton.textContent = 'Submit Test';
            testForm.appendChild(submitButton);

            testForm.addEventListener('submit', function(e) {
                e.preventDefault();
                let score = 0;
                let correctCount = 0;
                let incorrectCount = 0;
                
                test.questions.forEach((q, index) => {
                    const selectedOption = testForm.elements[`q${index + 1}`].value;
                    if (selectedOption === q.a) {
                        score++;
                        correctCount++;
                    } else {
                        incorrectCount++;
                    }
                });
                
                document.getElementById('quiz-score').textContent = score;
                document.getElementById('correct-answers').textContent = correctCount;
                document.getElementById('incorrect-answers').textContent = incorrectCount;
                document.getElementById('result-section').style.display = 'block';

                markTestAsCompleted(testName);
            });
        }

        function updateSubjectiveQuestions() {
            const questionsList = document.getElementById('subjective-questions-list');
            questionsList.innerHTML = '';

            const questions = subjectiveQuestions[currentChapter] || [];
            if (questions.length === 0) {
                questionsList.innerHTML = '<p>Subjective questions not available for this chapter.</p>';
                return;
            }
            questions.forEach((q, index) => {
                const questionCard = document.createElement('div');
                questionCard.classList.add('question-card');
                questionCard.innerHTML = `
                    <p>${index + 1}. ${q}</p>
                    <textarea class="answer-box" placeholder="Write your answer here..."></textarea>
                `;
                questionsList.appendChild(questionCard);
            });
        }
        
        function updateDownloads() {
            const downloadsList = document.getElementById('chapter-downloads-list');
            downloadsList.innerHTML = '';

            const downloads = downloadsData[`${currentClass} ${currentSubject} > ${currentChapter}`] || [];
            if (downloads.length === 0) {
                downloadsList.innerHTML = '<p>Downloads are not available for this chapter.</p>';
                return;
            }
            
            downloads.forEach(download => {
                const card = document.createElement('div');
                card.classList.add('card');
                card.innerHTML = `
                    <h3 style="margin-bottom: 0;">${currentChapter} - ${download.name}</h3>
                    <div class="download-btn-wrapper">
                        <a href="${download.link}" target="_blank"><button class="download-btn">Download</button></a>
                    </div>
                `;
                downloadsList.appendChild(card);
            });
        }
        
        function setupNotifications() {
            const notificationDot = document.getElementById('notification-dot');
            const newNotifications = true; // This would be a dynamic check in a real app
            if (newNotifications) {
                notificationDot.style.display = 'block';
            }
        }

        const darkModeToggle = document.getElementById('dark-mode-toggle');
        darkModeToggle.addEventListener('change', () => {
            document.body.classList.toggle('dark-mode');
        });

        function markLectureAsCompleted(lectureTitle) {
            const key = `${currentClass} ${currentSubject} > ${currentChapter}`;
            if (!userProgress[key]) {
                userProgress[key] = { lectures: [], tests: [] };
            }
            if (!userProgress[key].lectures.includes(lectureTitle)) {
                userProgress[key].lectures.push(lectureTitle);
                updateProgressBar();
            }
        }

        function markTestAsCompleted(testName) {
            const key = `${currentClass} ${currentSubject} > ${currentChapter}`;
            if (!userProgress[key]) {
                userProgress[key] = { lectures: [], tests: [] };
            }
            if (!userProgress[key].tests.includes(testName)) {
                userProgress[key].tests.push(testName);
                updateProgressBar();
            }
        }
        
        function updateProgressBar() {
            if (!currentChapter) return;
            
            const chapterKey = `${currentClass} ${currentSubject} > ${currentChapter}`;
            const lecturesCount = chapterLectures[chapterKey]?.length || 0;
            const hasTest = quizData[chapterKey] ? 1 : 0;
            
            if (lecturesCount === 0 && hasTest === 0) {
                 document.getElementById('progress-bar').style.width = '0%';
                 document.getElementById('progress-text').textContent = '0% Complete';
                 return;
            }
            
            const completedLectures = userProgress[chapterKey]?.lectures?.length || 0;
            const completedTests = userProgress[chapterKey]?.tests?.length || 0;
            
            const totalItems = lecturesCount + hasTest;
            const completedItems = completedLectures + completedTests;

            const progress = (completedItems / totalItems) * 100;
            document.getElementById('progress-bar').style.width = `${progress}%`;
            document.getElementById('progress-text').textContent = `${Math.round(progress)}% Complete`;
        }
        
        function showToast(message) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.classList.add('show');
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        // Login & User Data Handling
        function checkLoginStatus() {
            const storedUser = localStorage.getItem('userData');
            if (storedUser) {
                userData = JSON.parse(storedUser);
                loggedIn = true;
                document.getElementById('login-page').style.display = 'none';
                document.getElementById('main-app-container').style.display = 'block';
                showPage('home-page');
                updateProfile();
            } else {
                document.getElementById('login-page').style.display = 'block';
                document.getElementById('main-app-container').style.display = 'none';
            }
        }

        function handleLogin(e) {
            e.preventDefault();
            const name = document.getElementById('login-name').value;
            const mobile = document.getElementById('login-mobile').value;
            const selectedClass = document.getElementById('login-class').value;

            userData = {
                name: name,
                mobile: mobile,
                class: selectedClass
            };
            localStorage.setItem('userData', JSON.stringify(userData));
            loggedIn = true;
            
            document.getElementById('login-page').style.display = 'none';
            document.getElementById('main-app-container').style.display = 'block';
            showPage('home-page');
            updateProfile();
            showToast('Login successful!');
        }

        function updateProfile() {
            document.getElementById('student-name').textContent = userData.name;
            document.getElementById('student-class').textContent = `Class: ${userData.class}`;
        }
        
        function logoutUser() {
            localStorage.removeItem('userData');
            loggedIn = false;
            pageHistory = ['login-page'];
            checkLoginStatus();
            showToast('Logged out successfully.');
        }

        // Doubt page now opens the AI Tutor
        function handleDoubtSubmit(e) {
            e.preventDefault();
            const doubtText = document.getElementById('doubt-text').value;
            
            const loadingSpinner = document.getElementById('doubt-loading-spinner');
            const doubtForm = document.getElementById('doubt-form');

            doubtForm.style.display = 'none';
            loadingSpinner.style.display = 'block';
            showToast('Submitting your doubt to the AI Tutor...');

            setTimeout(() => {
                loadingSpinner.style.display = 'none';
                toggleGeminiChat();
                document.getElementById('doubt-form').reset();
            }, 2000);
        }

        // Gemini Chat Functionality
        function toggleGeminiChat() {
            const chatWindow = document.getElementById('gemini-chat-window');
            chatWindow.classList.toggle('open');
        }

        document.getElementById('login-form').addEventListener('submit', handleLogin);
        document.getElementById('doubt-form').addEventListener('submit', handleDoubtSubmit);

        document.addEventListener('DOMContentLoaded', () => {
            checkLoginStatus();
            setupNotifications();
        });
        
    </script>
</body>
</html>